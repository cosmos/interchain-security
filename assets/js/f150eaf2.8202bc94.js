"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7652],{84:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var r=s(5893),i=s(1151);const a={sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:5},o="x/ccv/provider",t={id:"build/modules/provider",title:"x/ccv/provider",description:"Overview",source:"@site/docs/build/modules/02-provider.md",sourceDirName:"build/modules",slug:"/build/modules/provider",permalink:"/interchain-security/build/modules/provider",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/interchain-security/build/modules/overview"},next:{title:"x/ccv/consumer",permalink:"/interchain-security/build/modules/consumer"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"State",id:"state",level:2},{value:"Consumer Lifecycle",id:"consumer-lifecycle",level:3},{value:"ConsumerId",id:"consumerid",level:4},{value:"ConsumerIdToChainId",id:"consumeridtochainid",level:4},{value:"ConsumerIdToOwnerAddress",id:"consumeridtoowneraddress",level:4},{value:"ConsumerIdToMetadataKey",id:"consumeridtometadatakey",level:4},{value:"ConsumerIdToPhase",id:"consumeridtophase",level:4},{value:"ConsumerIdToRemovalTime",id:"consumeridtoremovaltime",level:4},{value:"SpawnTimeToConsumerIds",id:"spawntimetoconsumerids",level:4},{value:"RemovalTimeToConsumerIds",id:"removaltimetoconsumerids",level:4},{value:"Consumer Launch",id:"consumer-launch",level:3},{value:"ConsumerIdToInitializationParameters",id:"consumeridtoinitializationparameters",level:4},{value:"ConsumerIdToChannelId",id:"consumeridtochannelid",level:4},{value:"ChannelIdToConsumerId",id:"channelidtoconsumerid",level:4},{value:"ConsumerIdToClientId",id:"consumeridtoclientid",level:4},{value:"ClientIdToConsumerId",id:"clientidtoconsumerid",level:4},{value:"ConsumerGenesis",id:"consumergenesis",level:4},{value:"Key Assignment",id:"key-assignment",level:3},{value:"ConsumerValidators",id:"consumervalidators",level:4},{value:"ValidatorsByConsumerAddr",id:"validatorsbyconsumeraddr",level:4},{value:"ConsumerAddrsToPruneV2",id:"consumeraddrstoprunev2",level:4},{value:"Power Shaping",id:"power-shaping",level:3},{value:"ConsumerIdToPowerShapingParameters",id:"consumeridtopowershapingparameters",level:4},{value:"ConsumerValidator",id:"consumervalidator",level:4},{value:"OptedIn",id:"optedin",level:4},{value:"Allowlist",id:"allowlist",level:4},{value:"Denylist",id:"denylist",level:4},{value:"MinimumPowerInTopN",id:"minimumpowerintopn",level:4},{value:"Prioritylist",id:"prioritylist",level:4},{value:"Validator Set Updates",id:"validator-set-updates",level:3},{value:"ValidatorSetUpdateId",id:"validatorsetupdateid",level:4},{value:"PendingVSCs",id:"pendingvscs",level:4},{value:"LastProviderConsensusVals",id:"lastproviderconsensusvals",level:4},{value:"Reward Distribution",id:"reward-distribution",level:3},{value:"ConsumerRewardDenoms",id:"consumerrewarddenoms",level:4},{value:"ConsumerRewardsAllocation",id:"consumerrewardsallocation",level:4},{value:"ConsumerCommissionRate",id:"consumercommissionrate",level:4},{value:"Consumer Infractions",id:"consumer-infractions",level:3},{value:"SlashMeter",id:"slashmeter",level:4},{value:"SlashMeterReplenishTimeCandidate",id:"slashmeterreplenishtimecandidate",level:4},{value:"ValsetUpdateBlockHeight",id:"valsetupdateblockheight",level:4},{value:"InitChainHeight",id:"initchainheight",level:4},{value:"SlashAcks",id:"slashacks",level:4},{value:"EquivocationEvidenceMinHeight",id:"equivocationevidenceminheight",level:4},{value:"State Transitions",id:"state-transitions",level:2},{value:"Consumer chain phases",id:"consumer-chain-phases",level:3},{value:"IBC Callbacks",id:"ibc-callbacks",level:2},{value:"OnChanOpenInit",id:"onchanopeninit",level:3},{value:"OnChanOpenTry",id:"onchanopentry",level:3},{value:"OnChanOpenAck",id:"onchanopenack",level:3},{value:"OnChanOpenConfirm",id:"onchanopenconfirm",level:3},{value:"OnChanCloseInit",id:"onchancloseinit",level:3},{value:"OnChanCloseConfirm",id:"onchancloseconfirm",level:3},{value:"OnRecvPacket",id:"onrecvpacket",level:3},{value:"OnAcknowledgementPacket",id:"onacknowledgementpacket",level:3},{value:"OnTimeoutPacket",id:"ontimeoutpacket",level:3},{value:"Messages",id:"messages",level:2},{value:"MsgUpdateParams",id:"msgupdateparams",level:3},{value:"MsgChangeRewardDenoms",id:"msgchangerewarddenoms",level:3},{value:"MsgCreateConsumer",id:"msgcreateconsumer",level:3},{value:"MsgUpdateConsumer",id:"msgupdateconsumer",level:3},{value:"MsgRemoveConsumer",id:"msgremoveconsumer",level:3},{value:"MsgOptIn",id:"msgoptin",level:3},{value:"MsgAssignConsumerKey",id:"msgassignconsumerkey",level:3},{value:"MsgOptOut",id:"msgoptout",level:3},{value:"MsgSetConsumerCommissionRate",id:"msgsetconsumercommissionrate",level:3},{value:"MsgSubmitConsumerMisbehaviour",id:"msgsubmitconsumermisbehaviour",level:3},{value:"MsgSubmitConsumerDoubleVoting",id:"msgsubmitconsumerdoublevoting",level:3},{value:"BeginBlock",id:"beginblock",level:2},{value:"EndBlock",id:"endblock",level:2},{value:"Hooks",id:"hooks",level:2},{value:"Events",id:"events",level:2},{value:"Parameters",id:"parameters",level:2},{value:"<code>TemplateClient</code>",id:"templateclient",level:3},{value:"TrustingPeriodFraction",id:"trustingperiodfraction",level:3},{value:"CcvTimeoutPeriod",id:"ccvtimeoutperiod",level:3},{value:"SlashMeterReplenishPeriod",id:"slashmeterreplenishperiod",level:3},{value:"SlashMeterReplenishFraction",id:"slashmeterreplenishfraction",level:3},{value:"ConsumerRewardDenomRegistrationFee",id:"consumerrewarddenomregistrationfee",level:3},{value:"BlocksPerEpoch",id:"blocksperepoch",level:3},{value:"NumberOfEpochsToStartReceivingRewards",id:"numberofepochstostartreceivingrewards",level:3},{value:"MaxProviderConsensusValidators",id:"maxproviderconsensusvalidators",level:3},{value:"Client",id:"client",level:2},{value:"CLI",id:"cli",level:3},{value:"Query",id:"query",level:4},{value:"Consumer Genesis",id:"consumer-genesis",level:5},{value:"List Consumer Chains",id:"list-consumer-chains",level:5},{value:"Validator Consumer Key Assignment",id:"validator-consumer-key-assignment",level:5},{value:"Validator Provider Key",id:"validator-provider-key",level:5},{value:"Throttle State",id:"throttle-state",level:5},{value:"Registered Consumer Reward Denoms",id:"registered-consumer-reward-denoms",level:5},{value:"All Pairs Valconsensus Address",id:"all-pairs-valconsensus-address",level:5},{value:"Provider Parameters",id:"provider-parameters",level:5},{value:"Consumer Opted In Validators",id:"consumer-opted-in-validators",level:5},{value:"Consumer Validators",id:"consumer-validators",level:5},{value:"Has to Validate",id:"has-to-validate",level:5},{value:"Validator Consumer Commission Rate",id:"validator-consumer-commission-rate",level:5},{value:"Blocks Until Next Epoch",id:"blocks-until-next-epoch",level:5},{value:"Consumer Id From Client Id",id:"consumer-id-from-client-id",level:5},{value:"Consumer Chain",id:"consumer-chain",level:5},{value:"Consumer Genesis Time",id:"consumer-genesis-time",level:5},{value:"Transactions",id:"transactions",level:4},{value:"Assign Consumer Key",id:"assign-consumer-key",level:5},{value:"Create Consumer",id:"create-consumer",level:5},{value:"Update Consumer",id:"update-consumer",level:5},{value:"Remove Consumer",id:"remove-consumer",level:5},{value:"Opt In",id:"opt-in",level:5},{value:"Opt Out",id:"opt-out",level:5},{value:"Set Consumer Commission Rate",id:"set-consumer-commission-rate",level:5},{value:"Submit Consumer Double Voting",id:"submit-consumer-double-voting",level:5},{value:"Submit Consumer Misbehaviour",id:"submit-consumer-misbehaviour",level:5},{value:"gRPC",id:"grpc",level:3},{value:"Consumer Genesis",id:"consumer-genesis-1",level:4},{value:"List Consumer Chains",id:"list-consumer-chains-1",level:4},{value:"Validator Consumer Key Assignment",id:"validator-consumer-key-assignment-1",level:4},{value:"Validator Provider Key",id:"validator-provider-key-1",level:4},{value:"Throttle State",id:"throttle-state-1",level:4},{value:"Registered Consumer Reward Denoms",id:"registered-consumer-reward-denoms-1",level:5},{value:"All Pairs Valconsensus Address",id:"all-pairs-valconsensus-address-1",level:4},{value:"Provider Parameters",id:"provider-parameters-1",level:4},{value:"Consumer Opted In Validators",id:"consumer-opted-in-validators-1",level:4},{value:"Consumer Validators",id:"consumer-validators-1",level:4},{value:"Has to Validate",id:"has-to-validate-1",level:4},{value:"Validator Consumer Commission Rate",id:"validator-consumer-commission-rate-1",level:4},{value:"Blocks Until Next Epoch",id:"blocks-until-next-epoch-1",level:4},{value:"Consumer Id From Client Id",id:"consumer-id-from-client-id-1",level:4},{value:"Consumer Chain",id:"consumer-chain-1",level:4},{value:"Consumer Genesis Time",id:"consumer-genesis-time-1",level:4},{value:"REST",id:"rest",level:3},{value:"Consumer Genesis",id:"consumer-genesis-2",level:4},{value:"List Consumer Chains",id:"list-consumer-chains-2",level:4},{value:"Validator Consumer Key Assignment",id:"validator-consumer-key-assignment-2",level:4},{value:"Validator Provider Key",id:"validator-provider-key-2",level:4},{value:"Throttle State",id:"throttle-state-2",level:4},{value:"Registered Consumer Reward Denoms",id:"registered-consumer-reward-denoms-2",level:4},{value:"All Pairs Valconsensus Address",id:"all-pairs-valconsensus-address-2",level:4},{value:"Provider Parameters",id:"provider-parameters-2",level:4},{value:"Consumer Opted In Validators",id:"consumer-opted-in-validators-2",level:4},{value:"Consumer Validators",id:"consumer-validators-2",level:4},{value:"Has to Validate",id:"has-to-validate-2",level:4},{value:"Validator Consumer Commission Rate",id:"validator-consumer-commission-rate-2",level:4},{value:"Blocks Until Next Epoch",id:"blocks-until-next-epoch-2",level:4},{value:"Consumer Id From Client Id",id:"consumer-id-from-client-id-2",level:4},{value:"Consumer Chain",id:"consumer-chain-2",level:4},{value:"Consumer Genesis Time",id:"consumer-genesis-time-2",level:4}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"xccvprovider",children:"x/ccv/provider"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The ICS provider module enables a proof-of-stake chain (known as the provider chain)\nto share (parts of) its security with other chains (known as consumer chains).\nThis basically means that consumer chains can run as proof-of-stake chains using\n(parts of) the stake locked on the provider as collateral."}),"\n",(0,r.jsx)(n.p,{children:"The provider module has the following functionalities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The permissionless creation of consumer chains."}),"\n",(0,r.jsx)(n.li,{children:"The customization of the consumer chains validator sets."}),"\n",(0,r.jsx)(n.li,{children:"The option for validators to opt in to validate the consumer chains they want."}),"\n",(0,r.jsx)(n.li,{children:"The distribution of rewards from consumer chains to the opted in validators."}),"\n",(0,r.jsx)(n.li,{children:"The slashing and jailing of validators committing infractions on consumer chains based on cryptographic evidence."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"state",children:"State"}),"\n",(0,r.jsxs)(n.p,{children:["For clarity, the description of the provider module state is split into features.\nFor a more accurate description, check out the ",(0,r.jsx)(n.code,{children:"x/ccv/provider/types/keys.go"})," file, which contains the definitions of all the keys."]}),"\n",(0,r.jsx)(n.h3,{id:"consumer-lifecycle",children:"Consumer Lifecycle"}),"\n",(0,r.jsx)(n.h4,{id:"consumerid",children:"ConsumerId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerId"})," is the consumer ID of the next consumer chain to be created."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(43) -> uint64"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtochainid",children:"ConsumerIdToChainId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToChainId"})," is the chain ID of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(44) | len(consumerId) | []byte(consumerId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtoowneraddress",children:"ConsumerIdToOwnerAddress"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToOwnerAddress"})," is the account address of the owner of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(45) | len(consumerId) | []byte(consumerId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtometadatakey",children:"ConsumerIdToMetadataKey"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToMetadataKey"})," is the metadata of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(46) | len(consumerId) | []byte(consumerId) -> ConsumerMetadata"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtophase",children:"ConsumerIdToPhase"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToPhase"})," is the phase of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(49) | len(consumerId) | []byte(consumerId) -> ConsumerPhase"}),", where ",(0,r.jsx)(n.code,{children:"ConsumerPhase"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"enum ConsumerPhase {\n  option (gogoproto.goproto_enum_prefix) = false;\n\n  // UNSPECIFIED defines an empty phase.\n  CONSUMER_PHASE_UNSPECIFIED = 0;\n  // REGISTERED defines the phase in which a consumer chain has been assigned a unique consumer id.\n  // A chain in this phase cannot yet launch.\n  CONSUMER_PHASE_REGISTERED = 1;\n  // INITIALIZED defines the phase in which a consumer chain has set all the needed parameters to launch but\n  // has not yet launched (e.g., because the `spawnTime` of the consumer chain has not yet been reached).\n  CONSUMER_PHASE_INITIALIZED = 2;\n  // LAUNCHED defines the phase in which a consumer chain is running and consuming a subset of the validator\n  // set of the provider.\n  CONSUMER_PHASE_LAUNCHED = 3;\n  // STOPPED defines the phase in which a previously-launched chain has stopped.\n  CONSUMER_PHASE_STOPPED = 4;\n  // DELETED defines the phase in which the state of a stopped chain has been deleted.\n  CONSUMER_PHASE_DELETED = 5;\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtoremovaltime",children:"ConsumerIdToRemovalTime"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToRemovalTime"})," is the removal time of a given consumer chain in the stopped phase."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(50) | len(consumerId) | []byte(consumerId) -> time.Time"})]}),"\n",(0,r.jsx)(n.h4,{id:"spawntimetoconsumerids",children:"SpawnTimeToConsumerIds"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SpawnTimeToConsumerIds"})," are the IDs of initialized consumer chains ready to be launched at a timestamp ",(0,r.jsx)(n.code,{children:"ts"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(51) | ts -> ConsumerIds"}),", where ",(0,r.jsx)(n.code,{children:"ConsumerIds"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message ConsumerIds { \n  repeated string ids = 1; \n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"removaltimetoconsumerids",children:"RemovalTimeToConsumerIds"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"RemovalTimeToConsumerIds"})," are the IDs of stopped consumer chains ready to be removed at a timestamp ",(0,r.jsx)(n.code,{children:"ts"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(52) | ts -> ConsumerIds"}),", where ",(0,r.jsx)(n.code,{children:"ConsumerIds"})," is defined as"]}),"\n",(0,r.jsx)(n.h3,{id:"consumer-launch",children:"Consumer Launch"}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtoinitializationparameters",children:"ConsumerIdToInitializationParameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToInitializationParameters"})," are the initialization parameters of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(47) | len(consumerId) | []byte(consumerId) -> ConsumerInitializationParameters"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtochannelid",children:"ConsumerIdToChannelId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToChannelId"})," is the ID of the CCV channel associated with a consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(5) | []byte(consumerId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"channelidtoconsumerid",children:"ChannelIdToConsumerId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ChannelIdToConsumerId"})," is the consumer ID associated with a CCV channel."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(6) | []byte(channelId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtoclientid",children:"ConsumerIdToClientId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToClientId"})," is the ID of the client associated with a consumer chain.\nThis is the underlying client of the corresponding CCV channel."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(7) | []byte(consumerId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"clientidtoconsumerid",children:"ClientIdToConsumerId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ClientIdToConsumerId"})," is the consumer ID associated with an IBC client (i.e., the underlying client of the corresponding CCV channel)."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(53) | len(clientId) | []byte(clientId) -> string"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumergenesis",children:"ConsumerGenesis"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerGenesis"})," is the genesis state of the consumer module associated with a consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(14) | []byte(consumerId) -> ConsumerGenesisState"})]}),"\n",(0,r.jsx)(n.h3,{id:"key-assignment",children:"Key Assignment"}),"\n",(0,r.jsx)(n.h4,{id:"consumervalidators",children:"ConsumerValidators"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["TODO: ",(0,r.jsx)(n.code,{children:"ConsumerValidators"})," and ",(0,r.jsx)(n.code,{children:"ConsumerValidator"})," are too similar."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerValidators"})," is the public key assigned by a given validator with ",(0,r.jsx)(n.code,{children:"addr"})," as its provider consensus address (i.e., ",(0,r.jsx)(n.code,{children:"sdk.ConsAddress"}),") on a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(22) | len(consumerId) | []byte(consumerId) | addr -> crypto.PublicKey"}),", where ",(0,r.jsx)(n.code,{children:"crypto"})," is ",(0,r.jsx)(n.code,{children:'"github.com/cometbft/cometbft/proto/tendermint/crypto"'}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"validatorsbyconsumeraddr",children:"ValidatorsByConsumerAddr"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ValidatorsByConsumerAddr"})," is the consensus address on the provider chain of a validator with ",(0,r.jsx)(n.code,{children:"addr"})," as its consensus address on a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(23) | len(consumerId) | []byte(consumerId) | addr -> sdk.ConsAddress"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"consumeraddrstoprunev2",children:"ConsumerAddrsToPruneV2"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerAddrsToPruneV2"})," stores the list of consumer consensus addresses that can be pruned at a timestamp ",(0,r.jsx)(n.code,{children:"ts"})," as they are no longer needed."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(40) | len(consumerId) | []byte(consumerId) | ts -> AddressList"}),", where ",(0,r.jsx)(n.code,{children:"AddressList"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message AddressList { \n  repeated bytes addresses = 1; \n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"power-shaping",children:"Power Shaping"}),"\n",(0,r.jsx)(n.h4,{id:"consumeridtopowershapingparameters",children:"ConsumerIdToPowerShapingParameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerIdToPowerShapingParameters"})," are the power-shaping parameters of a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(48) | len(consumerId) | []byte(consumerId) -> PowerShapingParameters"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumervalidator",children:"ConsumerValidator"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerValidator"})," is the ",(0,r.jsx)(n.code,{children:"ConsensusValidator"})," record of a provider validator on a given consumer chain, i.e.,"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message ConsensusValidator {\n  // validator's consensus address on the provider chain\n  bytes provider_cons_addr = 1;\n  // voting power the validator has during this epoch\n  int64 power = 2;\n  // public key the validator uses on the consumer chain during this epoch\n  tendermint.crypto.PublicKey public_key = 3;\n  // height the validator had when it FIRST became a consumer validator\n  int64 join_height = 4;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(31) | len(consumerId) | []byte(consumerId) | addr -> ConsensusValidator"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain."]}),"\n",(0,r.jsx)(n.h4,{id:"optedin",children:"OptedIn"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OptedIn"})," is the list of provider validators that opted in to validate on a given consumer chain.\nNote that opting in doesn't guarantee a spot in the consumer validator set."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(32) | len(consumerId) | []byte(consumerId) | addr -> []byte{}"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain."]}),"\n",(0,r.jsx)(n.h4,{id:"allowlist",children:"Allowlist"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Allowlist"})," is the list of provider validators that are eligible to validate a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(36) | len(consumerId) | []byte(consumerId) | addr -> []byte{}"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain."]}),"\n",(0,r.jsx)(n.h4,{id:"denylist",children:"Denylist"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Denylist"})," is the list of provider validators that are not eligible to validate a given consumer chain.\nNote that validators can opt in regardless of whether they are eligible or not."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(37) | len(consumerId) | []byte(consumerId) | addr -> []byte{}"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain."]}),"\n",(0,r.jsx)(n.h4,{id:"minimumpowerintopn",children:"MinimumPowerInTopN"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MinimumPowerInTopN"})," is the minimum voting power a provider validator must have to be required to validate a given TopN consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(40) | len(consumerId) | []byte(consumerId) -> uint64"})]}),"\n",(0,r.jsx)(n.h4,{id:"prioritylist",children:"Prioritylist"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Prioritylist"})," is the list of provider validators that have priority to validate a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(56) | len(consumerId) | []byte(consumerId) | addr -> []byte{}"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain."]}),"\n",(0,r.jsx)(n.h3,{id:"validator-set-updates",children:"Validator Set Updates"}),"\n",(0,r.jsx)(n.h4,{id:"validatorsetupdateid",children:"ValidatorSetUpdateId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ValidatorSetUpdateId"})," is an incrementing sequence number that is used as a unique identifier for validator set updates sent to the consumer chains.\nThe validator set update ID is incremented every epoch."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(2) -> uint64"})]}),"\n",(0,r.jsx)(n.h4,{id:"pendingvscs",children:"PendingVSCs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"PendingVSCs"})," is the list of ",(0,r.jsx)(n.code,{children:"VSCPackets"})," that are queued to be sent to a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(17) | []byte(consumerId) -> ValidatorSetChangePackets"}),", where ",(0,r.jsx)(n.code,{children:"ValidatorSetChangePackets"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message ValidatorSetChangePackets {\n  repeated ValidatorSetChangePacketData list = 1\n      [ (gogoproto.nullable) = false ];\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"lastproviderconsensusvals",children:"LastProviderConsensusVals"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"LastProviderConsensusVals"})," is the last validator set sent to the consensus engine of the provider chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(42) | addr -> ConsensusValidator"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain and ",(0,r.jsx)(n.code,{children:"ConsensusValidator"})," defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message ConsensusValidator {\n  // validator's consensus address on the provider chain\n  bytes provider_cons_addr = 1;\n  // voting power the validator has during this epoch\n  int64 power = 2;\n  // public key the validator uses on the consumer chain during this epoch\n  tendermint.crypto.PublicKey public_key = 3;\n  // height the validator had when it FIRST became a consumer validator\n  int64 join_height = 4;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"reward-distribution",children:"Reward Distribution"}),"\n",(0,r.jsx)(n.h4,{id:"consumerrewarddenoms",children:"ConsumerRewardDenoms"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerRewardDenoms"})," is storing the list of whitelisted denoms that are accepted as ICS rewards.\nNote that denoms that are not whitelisted can still be transferred to the ",(0,r.jsx)(n.code,{children:"consumer_rewards_pool"})," account on the provider module, but they will not be distributed to validators and their delegators."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(27) | []byte(denom) -> []byte{}"})]}),"\n",(0,r.jsx)(n.h4,{id:"consumerrewardsallocation",children:"ConsumerRewardsAllocation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerRewardsAllocation"})," is the allocation of ICS rewards for a given consumer chain.\nThis is used to distribute ICS rewards only to the validators that are part of the consumer chain validator set."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(38) | []byte(consumerId) -> ConsumerRewardsAllocation"}),", where ",(0,r.jsx)(n.code,{children:"ConsumerRewardsAllocation"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message ConsumerRewardsAllocation {\n  repeated cosmos.base.v1beta1.DecCoin rewards = 1 [\n    (gogoproto.nullable)     = false,\n    (amino.dont_omitempty)   = true,\n    (gogoproto.castrepeated) = "github.com/cosmos/cosmos-sdk/types.DecCoins"\n  ];\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"consumercommissionrate",children:"ConsumerCommissionRate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerCommissionRate"})," is the commission rate set by a provider validator for a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(39) | len(consumerId) | []byte(consumerId) | addr -> math.LegacyDec"}),", with ",(0,r.jsx)(n.code,{children:"addr"})," the validator's consensus address on the provider chain and ",(0,r.jsx)(n.code,{children:"math"})," is ",(0,r.jsx)(n.code,{children:'"cosmossdk.io/math"'}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"consumer-infractions",children:"Consumer Infractions"}),"\n",(0,r.jsx)(n.h4,{id:"slashmeter",children:"SlashMeter"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SlashMeter"})," is the meter used for the throttling mechanism as the allowance of voting power that can be jailed over time.\nIt is decremented by the amount of voting power jailed whenever a validator is jailed for downtime, and periodically replenished as decided by on-chain params.\nSee ",(0,r.jsx)(n.a,{href:"/interchain-security/adrs/adr-002-throttle",children:"ADR 002"})," for more details."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(3) -> math.Int"})]}),"\n",(0,r.jsx)(n.h4,{id:"slashmeterreplenishtimecandidate",children:"SlashMeterReplenishTimeCandidate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SlashMeterReplenishTimeCandidate"})," is the next UTC time the ",(0,r.jsx)(n.code,{children:"SlashMeter"})," could potentially be replenished.\nNote that this value is the next time the ",(0,r.jsx)(n.code,{children:"SlashMeter"})," will be replenished if and only if the ",(0,r.jsx)(n.code,{children:"SlashMeter"})," is not full.\nOtherwise this value will be updated in every future block until the slash meter becomes not full."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(4) -> time.Time"})]}),"\n",(0,r.jsx)(n.h4,{id:"valsetupdateblockheight",children:"ValsetUpdateBlockHeight"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ValsetUpdateBlockHeight"})," is the block height associated with a validator set update ID ",(0,r.jsx)(n.code,{children:"vscId"}),".\nThis is used for mapping infraction heights on consumer chains to heights on the provider chain via the validator set update IDs (together with ",(0,r.jsx)(n.a,{href:"#initchainheight",children:"InitChainHeight"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(13) | vscId -> uint64"})]}),"\n",(0,r.jsx)(n.h4,{id:"initchainheight",children:"InitChainHeight"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"InitChainHeight"})," is the block height on the provider when the CCV channel of a given consumer chain was established (i.e., the channel opening handshake was completed).\nThis is used for mapping infraction heights on consumer chains to heights on the provider chain (together with ",(0,r.jsx)(n.a,{href:"#valsetupdateblockheight",children:"ValsetUpdateBlockHeight"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(16) | []byte(consumerId) -> uint64"})]}),"\n",(0,r.jsx)(n.h4,{id:"slashacks",children:"SlashAcks"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SlashAcks"})," are addresses of validators for which ",(0,r.jsx)(n.code,{children:"SlashPackets"})," for downtime infractions received from a given consumer chain were handled.\nThese addresses are sent together with the validator updates to the consumer chain as confirmation that the downtime infractions were dealt with."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(15) | []byte(consumerId) -> SlashAcks"}),", where ",(0,r.jsx)(n.code,{children:"SlashAcks"})," is defined as"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:"message SlashAcks { \n  repeated string addresses = 1; \n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"equivocationevidenceminheight",children:"EquivocationEvidenceMinHeight"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"EquivocationEvidenceMinHeight"})," is the minimum height of a valid evidence of equivocation on a given consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Format: ",(0,r.jsx)(n.code,{children:"byte(29) | []byte(consumerId) -> uint64"})]}),"\n",(0,r.jsx)(n.h2,{id:"state-transitions",children:"State Transitions"}),"\n",(0,r.jsx)(n.h3,{id:"consumer-chain-phases",children:"Consumer chain phases"}),"\n",(0,r.jsx)(n.p,{children:"The following diagram describes the phases of a consumer chain from the perspective of the provider module:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Phases of a consumer chain",src:s(9169).Z+"",width:"2459",height:"1457"})}),"\n",(0,r.jsx)(n.h2,{id:"ibc-callbacks",children:"IBC Callbacks"}),"\n",(0,r.jsxs)(n.p,{children:["The consumer module is an IBC application that implements the ",(0,r.jsx)(n.a,{href:"https://ibc.cosmos.network/v8/ibc/apps/apps/#create-a-custom-ibc-application-module",children:"IBC module callback"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"onchanopeninit",children:"OnChanOpenInit"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanOpenInit"})," returns an error. ",(0,r.jsx)(n.code,{children:"MsgChannelOpenInit"})," should be sent to the consumer."]}),"\n",(0,r.jsx)(n.h3,{id:"onchanopentry",children:"OnChanOpenTry"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanOpenTry"})," validates the parameters of the ",(0,r.jsx)(n.em,{children:"CCV channel"})," -- an ordered IBC channel connected on the ",(0,r.jsx)(n.code,{children:"provider"})," port\nand with the counterparty port set to ",(0,r.jsx)(n.code,{children:"consumer"})," -- and asserts that the counterparty version matches the expected version\n(only version ",(0,r.jsx)(n.code,{children:"1"})," is supported)."]}),"\n",(0,r.jsx)(n.p,{children:"If the validation passes, the provider module verifies that the underlying client is the expected client of the consumer chain\n(i.e., the client created during the consumer chain launch) and that no other CCV channel exists for this consumer chain."}),"\n",(0,r.jsxs)(n.p,{children:["Finally, it sets the ",(0,r.jsx)(n.a,{href:"/interchain-security/build/modules/consumer#providerfeepooladdrstr",children:"ProviderFeePoolAddr"})," as part of the metadata."]}),"\n",(0,r.jsx)(n.h3,{id:"onchanopenack",children:"OnChanOpenAck"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanOpenAck"})," returns an error. ",(0,r.jsx)(n.code,{children:"MsgChannelOpenAck"})," should be sent to the consumer."]}),"\n",(0,r.jsx)(n.h3,{id:"onchanopenconfirm",children:"OnChanOpenConfirm"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanOpenConfirm"})," first verifies that no other CCV channel exists for this consumer chain. Note that this is a sanity check.\nThen, it sets the channel mapping in the state."]}),"\n",(0,r.jsx)(n.h3,{id:"onchancloseinit",children:"OnChanCloseInit"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanCloseInit"})," returns an error. ",(0,r.jsx)(n.code,{children:"MsgChannelCloseInit"})," should be sent to the consumer."]}),"\n",(0,r.jsx)(n.h3,{id:"onchancloseconfirm",children:"OnChanCloseConfirm"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnChanCloseConfirm"})," is a no-op."]}),"\n",(0,r.jsx)(n.h3,{id:"onrecvpacket",children:"OnRecvPacket"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnRecvPacket"})," unmarshals the IBC packet data into a ",(0,r.jsx)(n.code,{children:"SlashPacketData"})," struct (see below) and executes the handling logic."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Validate the fields in ",(0,r.jsx)(n.code,{children:"SlashPacketData"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"validator"})," has a valid address and a non-zero power;"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"infraction"})," is either downtime or double-singing;"]}),"\n",(0,r.jsxs)(n.li,{children:["the provider has in state a mapping from ",(0,r.jsx)(n.code,{children:"valset_update_id"})," to a block height."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"If it is a double-signing infraction, then just log it and return."}),"\n",(0,r.jsx)(n.li,{children:"Verify that the consumer chain is launched and the validator is opted in."}),"\n",(0,r.jsx)(n.li,{children:"Update the meter used for jail throttling."}),"\n",(0,r.jsx)(n.li,{children:"Jail the validator on the provider chain."}),"\n",(0,r.jsx)(n.li,{children:"Store in state the ACK that the downtime infraction was handled.\nThis will be sent to the consumer with the next validator updates to enable it\nto send other downtime infractions for this validator."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message SlashPacketData {\n  tendermint.abci.Validator validator = 1 [\n    (gogoproto.nullable) = false,\n    (gogoproto.moretags) = "yaml:\\"validator\\""\n  ];\n  // map to the infraction block height on the provider\n  uint64 valset_update_id = 2;\n  // tell if the slashing is for a downtime or a double-signing infraction\n  cosmos.staking.v1beta1.Infraction infraction = 3;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Note that IBC packets with ",(0,r.jsx)(n.code,{children:"VSCMaturedPacketData"})," data are dropped. For more details, check out ",(0,r.jsx)(n.a,{href:"/interchain-security/adrs/adr-018-remove-vscmatured",children:"ADR 018"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"onacknowledgementpacket",children:"OnAcknowledgementPacket"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnAcknowledgementPacket"})," stops and eventually removes the consumer chain associated with the channel on which the ",(0,r.jsx)(n.code,{children:"MsgAcknowledgement"})," message was received."]}),"\n",(0,r.jsx)(n.h3,{id:"ontimeoutpacket",children:"OnTimeoutPacket"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OnTimeoutPacket"})," stops and eventually removes the consumer chain associated with the channel on which the ",(0,r.jsx)(n.code,{children:"MsgTimeout"})," message was received."]}),"\n",(0,r.jsx)(n.h2,{id:"messages",children:"Messages"}),"\n",(0,r.jsx)(n.h3,{id:"msgupdateparams",children:"MsgUpdateParams"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgUpdateParams"})," updates the ",(0,r.jsx)(n.a,{href:"#parameters",children:"provider module parameters"}),".\nThe params are updated through a governance proposal where the signer is the gov module account address."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgUpdateParams {\n  option (cosmos.msg.v1.signer) = "authority";\n\n  // authority is the address of the governance account.\n  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  // params defines the x/provider parameters to update.\n  Params params = 2 [(gogoproto.nullable) = false];\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgchangerewarddenoms",children:"MsgChangeRewardDenoms"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgChangeRewardDenoms"})," updates the list of whitelisted denoms accepted by the provider as ICS rewards.\nThe list of accepted denoms is updated through a governance proposal where the signer is the gov module account address."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that this message replaces ",(0,r.jsx)(n.code,{children:"ChangeRewardDenomsProposal"}),", which is deprecated."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgChangeRewardDenoms {\n  option (cosmos.msg.v1.signer) = "authority";\n\n  // the list of consumer reward denoms to add\n  repeated string denoms_to_add = 1;\n  // the list of consumer reward denoms to remove\n  repeated string denoms_to_remove = 2;\n  // signer address\n  string authority = 3 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgcreateconsumer",children:"MsgCreateConsumer"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgCreateConsumer"})," enables a user to create a consumer chain."]}),"\n",(0,r.jsxs)(n.p,{children:["Both the ",(0,r.jsx)(n.code,{children:"chain_id"})," and ",(0,r.jsx)(n.code,{children:"metadata"})," fields are mandatory.\nThe ",(0,r.jsx)(n.code,{children:"initialization_parameters"}),", ",(0,r.jsx)(n.code,{children:"power_shaping_parameters"}),", ",(0,r.jsx)(n.code,{children:"infraction_parameters"})," and ",(0,r.jsx)(n.code,{children:"allowlisted_reward_denoms"})," fields are optional.\nThe parameters not provided are set to their zero value. If ",(0,r.jsx)(n.code,{children:"infraction_parameters"})," are not set, the default values currently configured on the provider are used."]}),"\n",(0,r.jsxs)(n.p,{children:["The owner of the created consumer chain is the submitter of the message.\nThis message cannot be submitted as part of a governance proposal, i.e., the submitter cannot be the gov module account address.\nAs a result, if the ",(0,r.jsx)(n.code,{children:"power_shaping_parameters"})," are provided, then ",(0,r.jsx)(n.code,{children:"power_shaping_parameters.top_N"})," must be set to zero (i.e., opt-in consumer chain)."]}),"\n",(0,r.jsx)(n.p,{children:"To create a top-n consumer chain, the following steps are required:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create an opt-in consumer chain (via ",(0,r.jsx)(n.code,{children:"MsgCreateConsumer"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the ownership of the consumer chain to the gov module account address (via ",(0,r.jsx)(n.code,{children:"MsgUpdateConsumer"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Change ",(0,r.jsx)(n.code,{children:"power_shaping_parameters.top_N"})," to a value in ",(0,r.jsx)(n.code,{children:"[50, 100]"})," through a governance proposal with a ",(0,r.jsx)(n.code,{children:"MsgUpdateConsumer"})," message."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"initialization_parameters"})," field is set and ",(0,r.jsx)(n.code,{children:"initialization_parameters.spawn_time > 0"}),", then the consumer chain will be scheduled to launch at ",(0,r.jsx)(n.code,{children:"spawn_time"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgCreateConsumer {\n  option (cosmos.msg.v1.signer) = "submitter";\n\n  // Submitter address. If the message is successfully handled, the ownership of \n  // the consumer chain will given to this address.\n  string submitter = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  // the chain id of the new consumer chain\n  string chain_id = 2;\n\n  ConsumerMetadata metadata = 3 [ (gogoproto.nullable) = false ];\n\n  ConsumerInitializationParameters initialization_parameters = 4;\n\n  PowerShapingParameters power_shaping_parameters = 5;\n\n  // allowlisted reward denoms by the consumer chain\n  AllowlistedRewardDenoms allowlisted_reward_denoms = 6;\n\n  // infraction parameters for slashing and jailing\n  InfractionParameters infraction_parameters = 7;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgupdateconsumer",children:"MsgUpdateConsumer"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgUpdateConsumer"})," enables the owner of a consumer chain to update its parameters (e.g., set a new owner)."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that only the ",(0,r.jsx)(n.code,{children:"owner"})," (i.e., signer) and ",(0,r.jsx)(n.code,{children:"consumer_id"})," fields are mandatory.\nThe others fields are optional. Not providing one of them will leave the existing values unchanged.\nProviding one of ",(0,r.jsx)(n.code,{children:"metadata"}),", ",(0,r.jsx)(n.code,{children:"initialization_parameters"}),", ",(0,r.jsx)(n.code,{children:"power_shaping_parameters"}),", or ",(0,r.jsx)(n.code,{children:"allowlisted_reward_denoms"}),"\nwill update all the containing fields.\nIf one of the containing fields is missing, it will be set to its zero value.\nFor example, updating the ",(0,r.jsx)(n.code,{children:"initialization_parameters"})," without specifying the ",(0,r.jsx)(n.code,{children:"spawn_time"}),", will set the ",(0,r.jsx)(n.code,{children:"spawn_time"})," to zero."]}),"\n",(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"initialization_parameters"})," field is set and ",(0,r.jsx)(n.code,{children:"initialization_parameters.spawn_time > 0"}),", then the consumer chain will be scheduled to launch at ",(0,r.jsx)(n.code,{children:"spawn_time"}),".\nUpdating the ",(0,r.jsx)(n.code,{children:"spawn_time"})," from a positive value to zero will remove the consumer chain from the list of scheduled to launch chains.\nIf the consumer chain is already launched, updating the ",(0,r.jsx)(n.code,{children:"initialization_parameters"})," is no longer possible."]}),"\n",(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"power_shaping_parameters"})," field is set and ",(0,r.jsx)(n.code,{children:"power_shaping_parameters.top_N"})," is positive, then the owner needs to be the gov module account address."]}),"\n",(0,r.jsxs)(n.p,{children:["If the ",(0,r.jsx)(n.code,{children:"new_owner_address"})," field is set to a value different than the gov module account address, then ",(0,r.jsx)(n.code,{children:"top_N"})," needs to be zero."]}),"\n",(0,r.jsxs)(n.p,{children:["We can also update the ",(0,r.jsx)(n.code,{children:"chain_id"})," of a consumer chain by using the optional ",(0,r.jsx)(n.code,{children:"new_chain_id"})," field. Note that the chain id of a consumer chain\ncan only be updated if the chain has not yet launched. After launch, the chain id of a consumer chain cannot be updated anymore."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgUpdateConsumer {\n  option (cosmos.msg.v1.signer) = "owner";\n\n  // the address of the owner of the consumer chain to be updated\n  string owner = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  // the consumer id of the consumer chain to be updated\n  string consumer_id = 2;\n\n  // the new owner of the consumer when updated\n  string new_owner_address = 3 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  // the metadata of the consumer when updated\n  ConsumerMetadata metadata = 4;\n\n  // initialization parameters can only be updated before a chain has launched\n  ConsumerInitializationParameters initialization_parameters = 5;\n\n  // the power-shaping parameters of the consumer when updated\n  PowerShapingParameters power_shaping_parameters = 6;\n\n  // allowlisted reward denoms by the consumer chain\n  AllowlistedRewardDenoms allowlisted_reward_denoms = 7;\n\n  // to update the chain id of the chain (can only be updated if the chain has not yet launched)\n  string new_chain_id = 8;\n\n  // infraction parameters for slashing and jailing\n  InfractionParameters infraction_parameters = 9;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgremoveconsumer",children:"MsgRemoveConsumer"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgRemoveConsumer"})," enables the owner of a ",(0,r.jsx)(n.em,{children:"launched"})," consumer chain to remove it from the provider chain.\nThe message will first stop the consumer chain, which means the provider will stop sending it validator updates over IBC.\nThen, once the unbonding period elapses, the consumer chain is removed from the provider state."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgRemoveConsumer {\n  option (cosmos.msg.v1.signer) = "owner";\n\n  // the consumer id of the consumer chain to be stopped\n  string consumer_id = 1;\n  // the address of the owner of the consumer chain to be stopped\n  string owner = 2 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgoptin",children:"MsgOptIn"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgOptIn"})," enables a validator to opt in to validate a consumer chain.\nNote that ",(0,r.jsx)(n.em,{children:"validators can opt in to validate consumer chains that are not launched yet"}),".\nThe signer of the message needs to match the validator address on the provider."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that opting in doesn't guarantee a spot in the consumer chain's validator set.\nUse the ",(0,r.jsx)(n.code,{children:"has-to-validate"})," query to check if the validator is part of the consumer chain's validator set.\nFor more details, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/validators/partial-set-security-for-validators",children:"validator guide to Partial Set Security"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_key"})," field is optional.\nIt enables the validator to set the consensus public key to use on the consumer chain.\nThe validator can assign (or re-assign) this key also later via ",(0,r.jsx)(n.a,{href:"#msgassignconsumerkey",children:"MsgAssignConsumerKey"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["Validators are strongly recommended to assign a separate key for each consumer chain\nand ",(0,r.jsx)(n.strong,{children:"not"})," reuse the provider key across consumer chains for security reasons."]}),(0,r.jsxs)(n.p,{children:["This is especially important since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthat allows multiple consumer chains to have the same chain ID.\nA validator using the same consensus key to validate on two chains with the same chain ID might get slashed for double signing."]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgOptIn {\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n  option (cosmos.msg.v1.signer) = "signer";\n\n  // [DEPRECATED] use `consumer_id` instead\n  string chain_id = 1 [deprecated = true];\n  // the validator address on the provider\n  string provider_addr = 2 [ (gogoproto.moretags) = "yaml:\\"address\\"" ];\n  // (optional) The consensus public key to use on the consumer in json string format corresponding to proto-any,\n  // for example `{"@type":"/cosmos.crypto.ed25519.PubKey","key":"Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="}`.\n  // This field is optional and can remain empty (i.e., `consumer_key = ""`). A validator can always change the\n  // consumer public key at a later stage by issuing a `MsgAssignConsumerKey` message.\n  string consumer_key = 3;\n  // submitter address\n  string signer = 4 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n  // the consumer id of the consumer chain to opt in to\n  string consumer_id = 5;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgassignconsumerkey",children:"MsgAssignConsumerKey"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgAssignConsumerKey"})," enables a validator to assign the consensus public key to use on a consumer chain.\nWithout assigning a specific key, the validator will need to use the same key as on the provider chain."]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["Validators are strongly recommended to assign a separate key for each consumer chain\nand ",(0,r.jsx)(n.strong,{children:"not"})," reuse the provider key across consumer chains for security reasons."]}),(0,r.jsxs)(n.p,{children:["This is especially important since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthat allows multiple consumer chains to have the same chain ID.\nA validator using the same consensus key to validate on two chains with the same chain ID might get slashed for double signing."]})]}),"\n",(0,r.jsx)(n.p,{children:"The signer of the message needs to match the validator address on the provider."}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["For more details, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/features/key-assignment",children:"description of the Key Assignment feature"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgAssignConsumerKey {\n  option (cosmos.msg.v1.signer) = "signer";\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n\n\n  // [DEPRECATED] use `consumer_id` instead\n  string chain_id = 1 [deprecated = true];\n  // The validator address on the provider\n  string provider_addr = 2 [ (gogoproto.moretags) = "yaml:\\"address\\"" ];\n  // The consensus public key to use on the consumer.\n  // in json string format corresponding to proto-any, ex:\n  // `{"@type":"/cosmos.crypto.ed25519.PubKey","key":"Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="}`\n  string consumer_key = 3;\n\n  string signer = 4 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  // the consumer id of the consumer chain to assign a consensus public key to\n  string consumer_id = 5;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgoptout",children:"MsgOptOut"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgOptOut"})," enables a validator to opt out from validating a launched consumer chain.\nThe signer of the message needs to match the validator address on the provider."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["For more details on optin out, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/validators/partial-set-security-for-validators",children:"validator guide to Partial Set Security"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgOptOut {\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n  option (cosmos.msg.v1.signer) = "signer";\n\n  // [DEPRECATED] use `consumer_id` instead\n  string chain_id = 1 [deprecated = true];\n  // the validator address on the provider\n  string provider_addr = 2 [ (gogoproto.moretags) = "yaml:\\"address\\"" ];\n  // submitter address\n  string signer = 3 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n  // the consumer id of the consumer chain to opt out from\n  string consumer_id = 4;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgsetconsumercommissionrate",children:"MsgSetConsumerCommissionRate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgSetConsumerCommissionRate"})," enables validators to set a per-consumer chain commission rate.\nThe ",(0,r.jsx)(n.code,{children:"rate"})," is a decimal in ",(0,r.jsx)(n.code,{children:"[minRate, 1]"}),", with ",(0,r.jsx)(n.code,{children:"minRate"})," corresponding to the minimum commission rate set on the\nprovider chain (see ",(0,r.jsx)(n.code,{children:"min_commission_rate"})," in ",(0,r.jsx)(n.code,{children:"interchain-security-pd query staking params"}),")."]}),"\n",(0,r.jsx)(n.p,{children:"The signer of the message needs to match the validator address on the provider."}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["For more details on setting per-consumer chain commission rates, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/validators/partial-set-security-for-validators",children:"validator guide to Partial Set Security"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgSetConsumerCommissionRate {\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n  option (cosmos.msg.v1.signer) = "signer";\n\n  // The validator address on the provider\n  string provider_addr = 1 [ (gogoproto.moretags) = "yaml:\\"address\\"" ];\n  // [DEPRECATED] use `consumer_id` instead\n  string chain_id = 2 [deprecated = true];\n  // The rate to charge delegators on the consumer chain, as a fraction\n  string rate = 3 [\n    (cosmos_proto.scalar)  = "cosmos.Dec",\n    (gogoproto.customtype) = "cosmossdk.io/math.LegacyDec",\n    (gogoproto.nullable)   = false\n    ];\n  // submitter address\n  string signer = 4 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n  // the consumer id of the consumer chain to set the commission rate\n  string consumer_id = 5;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgsubmitconsumermisbehaviour",children:"MsgSubmitConsumerMisbehaviour"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgSubmitConsumerMisbehaviour"})," enables users to submit to the provider evidence of a light client attack that occurred on a consumer chain.\nThis message can be submitted directly by users, e.g., via the CLI command ",(0,r.jsx)(n.code,{children:"tx provider submit-consumer-misbehaviour"}),",\nor by a relayer that can be set to automatically detect consumer chain misbehaviors, e.g., ",(0,r.jsx)(n.a,{href:"https://github.com/informalsystems/hermes",children:"Hermes"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["For more details on reporting light client attacks that occurred on consumer chains, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/features/slashing#equivocation-infractions",children:"guide on equivocation infractions"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgSubmitConsumerMisbehaviour {\n  option (cosmos.msg.v1.signer) = "submitter";\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n\n  string submitter = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n  // The Misbehaviour of the consumer chain wrapping\n  // two conflicting IBC headers\n  ibc.lightclients.tendermint.v1.Misbehaviour misbehaviour = 2;\n  // the consumer id of the consumer chain where the misbehaviour occurred\n  string consumer_id = 3;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"msgsubmitconsumerdoublevoting",children:"MsgSubmitConsumerDoubleVoting"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MsgSubmitConsumerDoubleVoting"})," enables users to submit to the provider evidence of a double signing infraction that occurred on a consumer chain.\nThis message can be submitted directly by users, e.g., via the CLI command ",(0,r.jsx)(n.code,{children:"tx provider submit-consumer-double-voting"}),",\nor by a relayer that can be set to automatically detect consumer chain misbehaviors, e.g., ",(0,r.jsx)(n.a,{href:"https://github.com/informalsystems/hermes",children:"Hermes"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that since the introduction of the\n",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-019-permissionless-ics",children:"Permissionless ICS feature"}),"\nthe ",(0,r.jsx)(n.code,{children:"chain_id"})," field is deprecated.\nUsers should use ",(0,r.jsx)(n.code,{children:"consumer_id"})," instead.\nYou can use the ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," query to get the list of all consumer chains and their consumer IDs."]}),"\n",(0,r.jsxs)(n.p,{children:["For more details on reporting double signing infractions that occurred on consumer chains, check out the ",(0,r.jsx)(n.a,{href:"/interchain-security/features/slashing#equivocation-infractions",children:"guide on equivocation infractions"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-proto",children:'message MsgSubmitConsumerDoubleVoting {\n  option (cosmos.msg.v1.signer) = "submitter";\n  option (gogoproto.equal) = false;\n  option (gogoproto.goproto_getters) = false;\n\n  string submitter = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n  // The equivocation of the consumer chain wrapping\n  // an evidence of a validator that signed two conflicting votes\n  tendermint.types.DuplicateVoteEvidence duplicate_vote_evidence = 2;\n  // The light client header of the infraction block\n  ibc.lightclients.tendermint.v1.Header infraction_block_header = 3;\n  // the consumer id of the consumer chain where the double-voting took place\n  string consumer_id = 4;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"beginblock",children:"BeginBlock"}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"BeginBlock"})," of the provider module the following actions are performed:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Launch every consumer chain that has a spawn time that already passed.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compute the initial validator set."}),"\n",(0,r.jsxs)(n.li,{children:["Create the genesis state for the consumer module.\nNote that the genesis state contains the ",(0,r.jsx)(n.a,{href:"/interchain-security/build/modules/consumer#parameters",children:"consumer module parameters"})," and\nboth the client state and consensus state needed for creating a provider client on the consumer chain."]}),"\n",(0,r.jsx)(n.li,{children:"Create a consumer client."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Remove every stopped consumer chain for which the removal time has passed."}),"\n",(0,r.jsx)(n.li,{children:"Replenish the throttling meter if necessary."}),"\n",(0,r.jsx)(n.li,{children:"Distribute ICS rewards to the opted in validators."}),"\n",(0,r.jsx)(n.li,{children:"Update consumer infraction parameters with the queued infraction parameters that were added to the queue before a time period greater than the unbonding time."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note that for every consumer chain, the computation of its initial validator set is based on the consumer's ",(0,r.jsx)(n.a,{href:"/interchain-security/features/power-shaping",children:"power shaping parameters"}),"\nand the ",(0,r.jsx)(n.a,{href:"/interchain-security/features/partial-set-security",children:"validators that opted in on that consumer"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"endblock",children:"EndBlock"}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.code,{children:"EndBlock"})," of the provider module the following actions are performed:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Store in state the VSC id to block height mapping needed for determining the height of infractions on consumer chains."}),"\n",(0,r.jsx)(n.li,{children:"Prune the no-longer needed public keys assigned by validators to use when validating on consumer chains."}),"\n",(0,r.jsxs)(n.li,{children:["Send validator updates to the consensus engine.\nThe maximum number of validators is set through the ",(0,r.jsx)(n.a,{href:"#maxproviderconsensusvalidators",children:"MaxProviderConsensusValidators"})," param."]}),"\n",(0,r.jsxs)(n.li,{children:["At the beginning of every epoch,","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"for every launched consumer chain, compute the next consumer validator set and send it to the consumer chain via an IBC packet;"}),"\n",(0,r.jsx)(n.li,{children:"increment the VSC id."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note that for every consumer chain, the computation of its validator set is based on the consumer's ",(0,r.jsx)(n.a,{href:"/interchain-security/features/power-shaping",children:"power shaping parameters"}),"\nand the ",(0,r.jsx)(n.a,{href:"/interchain-security/features/partial-set-security",children:"validators that opted in on that consumer"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"TBA"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"TBA"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The provider module contains the following parameters."}),"\n",(0,r.jsx)(n.h3,{id:"templateclient",children:(0,r.jsx)(n.code,{children:"TemplateClient"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"TemplateClient"})," is a template of an IBC ",(0,r.jsx)(n.code,{children:"ClientState"})," used for launching consumer chains."]}),"\n",(0,r.jsx)(n.h3,{id:"trustingperiodfraction",children:"TrustingPeriodFraction"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:'"0.66"'})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"TrustingPeriodFraction"})," is used to used to compute the trusting period of IBC clients\n(for both provider and consumer chains) as ",(0,r.jsx)(n.code,{children:"UnbondingPeriod / TrustingPeriodFraction"}),".\nNote that a light client must be updated within the trusting period in order to avoid being frozen."]}),"\n",(0,r.jsxs)(n.p,{children:["The param is set as a string, and converted to a ",(0,r.jsx)(n.code,{children:"sdk.Dec"})," when used."]}),"\n",(0,r.jsx)(n.h3,{id:"ccvtimeoutperiod",children:"CcvTimeoutPeriod"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"time.Duration"}),(0,r.jsx)(n.td,{children:"2419200s (4 weeks)"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CcvTimeoutPeriod"})," is the period used to compute the timeout timestamp when sending IBC packets.\nFor more details, see the ",(0,r.jsx)(n.a,{href:"https://github.com/cosmos/ibc/blob/main/spec/core/ics-004-channel-and-packet-semantics/README.md#sending-packets",children:"IBC specification of Channel & Packet Semantics"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"If a sent packet is not relayed within this period, then the packet times out. The CCV channel used by the interchain security protocol is closed, and the corresponding consumer is removed."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CcvTimeoutPeriod"})," may have different values on the provider and consumer chains.\n",(0,r.jsx)(n.code,{children:"CcvTimeoutPeriod"})," on the provider ",(0,r.jsx)(n.strong,{children:"must"})," be larger than consumer unbonding period."]}),"\n",(0,r.jsx)(n.h3,{id:"slashmeterreplenishperiod",children:"SlashMeterReplenishPeriod"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"time.Duration"}),(0,r.jsx)(n.td,{children:"3600s (1 hour)"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SlashMeterReplenishPeriod"})," is the time interval at which the meter for ",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-008-throttle-retries",children:"jail throttling"})," is replenished.\nThe meter is replenished to an amount equal to the allowance for that block, or ",(0,r.jsx)(n.code,{children:"SlashMeterReplenishFraction * CurrentTotalVotingPower"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"slashmeterreplenishfraction",children:"SlashMeterReplenishFraction"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:'"0.05"'})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SlashMeterReplenishFraction"})," is the fraction (in range ",(0,r.jsx)(n.code,{children:"[0, 1]"}),") of total voting power that is replenished to the slash meter when a replenishment occurs.\nThis param also serves as a maximum fraction of total voting power that the slash meter can hold."]}),"\n",(0,r.jsxs)(n.p,{children:["The param is set as a string, and converted to a ",(0,r.jsx)(n.code,{children:"sdk.Dec"})," when used."]}),"\n",(0,r.jsx)(n.h3,{id:"consumerrewarddenomregistrationfee",children:"ConsumerRewardDenomRegistrationFee"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ConsumerRewardDenomRegistrationFee"})," is deprecated."]}),"\n",(0,r.jsx)(n.h3,{id:"blocksperepoch",children:"BlocksPerEpoch"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"int64"}),(0,r.jsx)(n.td,{children:"600"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BlocksPerEpoch"})," is the number of blocks in an ICS epoch.\nThe provider sends validator updates to the consumer chains only once per epoch."]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"It is recommended for the length of an ICS epoch to not exceed a day.\nLarge epochs would lead to delays in validator updates sent to the consumer chains,\nwhich might impact the security of the consumer chains."})}),"\n",(0,r.jsx)(n.h3,{id:"numberofepochstostartreceivingrewards",children:"NumberOfEpochsToStartReceivingRewards"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"int64"}),(0,r.jsx)(n.td,{children:"24"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"NumberOfEpochsToStartReceivingRewards"})," is the number of ICS epochs that a validator\nneeds to wait after opting in on a consumer chain before being eligible to ICS rewards\nfrom that consumer."]}),"\n",(0,r.jsx)(n.h3,{id:"maxproviderconsensusvalidators",children:"MaxProviderConsensusValidators"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default value"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"int64"}),(0,r.jsx)(n.td,{children:"180"})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"MaxProviderConsensusValidators"})," is the maximum number of validators sent to\nthe provider consensus engine.\nThis was introduced with the ",(0,r.jsx)(n.a,{href:"https://cosmos.github.io/interchain-security/adrs/adr-017-allowing-inactive-validators",children:"Inactive Provider Validators feature"}),"\nand it replaces the ",(0,r.jsx)(n.code,{children:"MaxValidators"})," staking module parameter.",(0,r.jsx)(n.br,{}),"\n","As a result, the provider chain can differentiate between\n",(0,r.jsx)(n.em,{children:"bonded validators"}),", i.e., validators that have stake locked on the provider chain,\nand ",(0,r.jsx)(n.em,{children:"active validator"}),", i.e., validators that participate actively in the provider chain's consensus."]}),"\n",(0,r.jsx)(n.h2,{id:"client",children:"Client"}),"\n",(0,r.jsx)(n.h3,{id:"cli",children:"CLI"}),"\n",(0,r.jsxs)(n.p,{children:["A user can interact with the ",(0,r.jsx)(n.code,{children:"provider"})," module using the CLI."]}),"\n",(0,r.jsx)(n.h4,{id:"query",children:"Query"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"query"})," commands allow users to query ",(0,r.jsx)(n.code,{children:"provider"})," state."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider --help\n"})}),"\n",(0,r.jsx)(n.h5,{id:"consumer-genesis",children:"Consumer Genesis"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-genesis"})," command allows to query for consumer chain genesis state by consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-genesis [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-genesis 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'new_chain: true\nparams:\n  blocks_per_distribution_transmission: "1000"\n  ccv_timeout_period: 2419200s\n  consumer_id: "0"\n  consumer_redistribution_fraction: "0.75"\n  distribution_transmission_channel: ""\n  enabled: true\n  historical_entries: "10000"\n  provider_fee_pool_addr_str: ""\n  provider_reward_denoms: []\n  retry_delay_period: 3600s\n  reward_denoms: []\n  soft_opt_out_threshold: "0"\n  transfer_timeout_period: 3600s\n  unbonding_period: 1209600s\nprovider:\n  client_state:\n    allow_update_after_expiry: false\n    allow_update_after_misbehaviour: false\n    chain_id: provider\n    frozen_height:\n      revision_height: "0"\n      revision_number: "0"\n    latest_height:\n      revision_height: "25"\n      revision_number: "0"\n    max_clock_drift: 10s\n    proof_specs:\n    - inner_spec:\n        child_order:\n        - 0\n        - 1\n        child_size: 33\n        empty_child: null\n        hash: SHA256\n        max_prefix_length: 12\n        min_prefix_length: 4\n      leaf_spec:\n        hash: SHA256\n        length: VAR_PROTO\n        prefix: AA==\n        prehash_key: NO_HASH\n        prehash_value: SHA256\n      max_depth: 0\n      min_depth: 0\n      prehash_key_before_comparison: false\n    - inner_spec:\n        child_order:\n        - 0\n        - 1\n        child_size: 32\n        empty_child: null\n        hash: SHA256\n        max_prefix_length: 1\n        min_prefix_length: 1\n      leaf_spec:\n        hash: SHA256\n        length: VAR_PROTO\n        prefix: AA==\n        prehash_key: NO_HASH\n        prehash_value: SHA256\n      max_depth: 0\n      min_depth: 0\n      prehash_key_before_comparison: false\n    trust_level:\n      denominator: "3"\n      numerator: "1"\n    trusting_period: 1197504s\n    unbonding_period: 1814400s\n    upgrade_path:\n    - upgrade\n    - upgradedIBCState\n  consensus_state:\n    next_validators_hash: 632730A03DEF630F77B61DF4092629007AE020B789713158FABCB104962FA54F\n    root:\n      hash: Jcck4b/HHJOcjcVjTdMi8qHB4SeCpWpfLiN9DtB99oA=\n    timestamp: "2024-09-25T09:18:40.262655625Z"\n  initial_val_set:\n  - power: "500"\n    pub_key:\n      ed25519: RrclQz9bIhkIy/gfL485g3PYMeiIku4qeo495787X10=\n  - power: "500"\n    pub_key:\n      ed25519: Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is=\n  - power: "500"\n    pub_key:\n      ed25519: mAN6RXYxSM4MNGSIriYiS7pHuwAcOHDQAy9/wnlSzOI=\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"list-consumer-chains",children:"List Consumer Chains"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"list-consumer-chains"})," command allows to query consumer chains supported by the provider chain.\nAn optional integer parameter can be passed for phase filtering of consumer chains, (Registered=1|Initialized=2|Launched=3|Stopped=4|Deleted=5).`"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider list-consumer-chains [phase] [limit] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider list-consumer-chains 3\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'chains:\n- allow_inactive_vals: true\n  allowlist: []\n  prioritylist: []\n  chain_id: pion-1\n  client_id: 07-tendermint-0\n  consumer_id: "0"\n  denylist: ["cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6"]\n  metadata:\n    description: description of your chain and all other relevant information\n    metadata: some metadata about your chain\n    name: pion-1\n  min_power_in_top_N: "500"\n  min_stake: "0"\n  phase: CONSUMER_PHASE_LAUNCHED\n  top_N: 60\n  validator_set_cap: 0\n  validators_power_cap: 0\npagination:\n  next_key: null\n  total: "1"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"validator-consumer-key-assignment",children:"Validator Consumer Key Assignment"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"validator-consumer-key"})," command allows to query assigned validator consensus public key for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-consumer-key [consumer-id] [provider-validator-address] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-consumer-key 0 cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"consumer_address: cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"validator-provider-key",children:"Validator Provider Key"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"validator-provider-key"})," command allows to query validator consensus public key for the provider chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-provider-key [consumer-id] [consumer-validator-address] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-provider-key 0 cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"provider_address: cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"throttle-state",children:"Throttle State"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"throttle-state"})," command allows to query on-chain state relevant to slash packet throttling."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider throttle-state [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider throttle-state\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'next_replenish_candidate: "2024-09-26T07:59:51.336971970Z"\nslash_meter: "1500"\nslash_meter_allowance: "1511"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"registered-consumer-reward-denoms",children:"Registered Consumer Reward Denoms"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"registered-consumer-reward-denoms"})," command allows to query registered consumer reward denoms."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider registered-consumer-reward-denoms [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider registered-consumer-reward-denoms\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"denoms:\n- ibc/3C3D7B3BE4ECC85A0E5B52A3AEC3B7DFC2AA9CA47C37821E57020D6807043BE9\n- ibc/D549749C93524DA1831A4B3C850DFC1BA9060261BEDFB224B3B0B4744CD77A70\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"all-pairs-valconsensus-address",children:"All Pairs Valconsensus Address"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"all-pairs-valconsensus-address"})," command allows to query all pairs of valconsensus address by consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider all-pairs-valconsensus-address [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider all-pairs-valconsensus-address 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pair_val_con_addr:\n- consumer_address: cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk\n  consumer_key:\n    ed25519: Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is=\n  provider_address: cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"provider-parameters",children:"Provider Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"params"})," command allows to query provider parameters information."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider params [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider params\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'blocks_per_epoch: "3"\nccv_timeout_period: 2419200s\nconsumer_reward_denom_registration_fee:\n  amount: "10000000"\n  denom: stake\nmax_provider_consensus_validators: "180"\nnumber_of_epochs_to_start_receiving_rewards: "24"\nslash_meter_replenish_fraction: "1.0"\nslash_meter_replenish_period: 3600s\ntemplate_client:\n  allow_update_after_expiry: false\n  allow_update_after_misbehaviour: false\n  chain_id: ""\n  frozen_height:\n    revision_height: "0"\n    revision_number: "0"\n  latest_height:\n    revision_height: "0"\n    revision_number: "0"\n  max_clock_drift: 10s\n  proof_specs:\n  - inner_spec:\n      child_order:\n      - 0\n      - 1\n      child_size: 33\n      empty_child: null\n      hash: SHA256\n      max_prefix_length: 12\n      min_prefix_length: 4\n    leaf_spec:\n      hash: SHA256\n      length: VAR_PROTO\n      prefix: AA==\n      prehash_key: NO_HASH\n      prehash_value: SHA256\n    max_depth: 0\n    min_depth: 0\n    prehash_key_before_comparison: false\n  - inner_spec:\n      child_order:\n      - 0\n      - 1\n      child_size: 32\n      empty_child: null\n      hash: SHA256\n      max_prefix_length: 1\n      min_prefix_length: 1\n    leaf_spec:\n      hash: SHA256\n      length: VAR_PROTO\n      prefix: AA==\n      prehash_key: NO_HASH\n      prehash_value: SHA256\n    max_depth: 0\n    min_depth: 0\n    prehash_key_before_comparison: false\n  trust_level:\n    denominator: "3"\n    numerator: "1"\n  trusting_period: 0s\n  unbonding_period: 0s\n  upgrade_path:\n  - upgrade\n  - upgradedIBCState\ntrusting_period_fraction: "0.66"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"consumer-opted-in-validators",children:"Consumer Opted In Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-opted-in-validators"})," command allows to query opted-in validators for a given consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-opted-in-validators [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-opted-in-validators 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"validators_provider_addresses:\n- cosmosvalcons1qmq08eruchr5sf5s3rwz7djpr5a25f7xw4mceq\n- cosmosvalcons1nx7n5uh0ztxsynn4sje6eyq2ud6rc6klc96w39\n- cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"consumer-validators",children:"Consumer Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-validators"})," command allows to query the last set consumer-validator set for a given consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-validators [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-validators 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'validators:\n- consumer_commission_rate: "0.100000000000000000"\n  consumer_key:\n    ed25519: RrclQz9bIhkIy/gfL485g3PYMeiIku4qeo495787X10=\n  consumer_power: "511"\n  description:\n    details: ""\n    identity: ""\n    moniker: validatoralice\n    security_contact: ""\n    website: ""\n  jailed: false\n  power: "0"\n  provider_address: cosmosvalcons1qmq08eruchr5sf5s3rwz7djpr5a25f7xw4mceq\n  provider_commission_rate: "0.100000000000000000"\n  provider_operator_address: cosmosvaloper19pe9pg5dv9k5fzgzmsrgnw9rl9asf7ddtrgtng\n  provider_power: "511"\n  provider_tokens: "511000000"\n  rate: "0.000000000000000000"\n  status: BOND_STATUS_BONDED\n  validates_current_epoch: true\n- consumer_commission_rate: "0.100000000000000000"\n  consumer_key:\n    ed25519: mAN6RXYxSM4MNGSIriYiS7pHuwAcOHDQAy9/wnlSzOI=\n  consumer_power: "500"\n  description:\n    details: ""\n    identity: ""\n    moniker: validatorbob\n    security_contact: ""\n    website: ""\n  jailed: false\n  power: "0"\n  provider_address: cosmosvalcons1nx7n5uh0ztxsynn4sje6eyq2ud6rc6klc96w39\n  provider_commission_rate: "0.100000000000000000"\n  provider_operator_address: cosmosvaloper1dkas8mu4kyhl5jrh4nzvm65qz588hy9qakmjnw\n  provider_power: "500"\n  provider_tokens: "500000000"\n  rate: "0.000000000000000000"\n  status: BOND_STATUS_BONDED\n  validates_current_epoch: true\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"has-to-validate",children:"Has to Validate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"has-to-validate"})," command allows to query the consumer chains list a given validator has to validate."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider has-to-validate [provider-validator-address] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider has-to-validate cosmoscons1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'consumer_ids:\n- "0"\n- "2"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"validator-consumer-commission-rate",children:"Validator Consumer Commission Rate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"validator-consumer-commission-rate"})," command allows to query the consumer commission rate a validator charges on a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-consumer-commission-rate [consumer-id] [provider-validator-address] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider validator-consumer-commission-rate 0 cosmoscons1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'rate: "0.750000000000000000"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"blocks-until-next-epoch",children:"Blocks Until Next Epoch"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"blocks-until-next-epoch"})," command allows to query the number of blocks until the next epoch begins and validator updates are sent to consumer chains"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider blocks-until-next-epoch [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider blocks-until-next-epoch\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'blocks_until_next_epoch: "286"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"consumer-id-from-client-id",children:"Consumer Id From Client Id"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-id-from-client-id"})," command allows to query the consumer id of the chain associated with the provided client id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-id-from-client-id [client-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-id-from-client-id 07-tendermint-0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'consumer_id: "0"\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"consumer-chain",children:"Consumer Chain"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-chain"})," command allows to query the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-chain [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-chain 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'chain_id: pion-1\nconsumer_id: "0"\ninit_params:\n  binary_hash: YmluX2hhc2g=\n  blocks_per_distribution_transmission: "1000"\n  ccv_timeout_period: 2419200s\n  consumer_redistribution_fraction: "0.75"\n  distribution_transmission_channel: ""\n  genesis_hash: Z2VuX2hhc2g=\n  historical_entries: "10000"\n  initial_height:\n    revision_height: "1"\n    revision_number: "0"\n  spawn_time: "2024-09-26T06:55:14.616054Z"\n  transfer_timeout_period: 3600s\n  unbonding_period: 1209600s\n  connection_id: ""\nmetadata:\n    description: description of your chain and all other relevant information\n    metadata: some metadata about your chain\n    name: pion-1\nowner_address: cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn\nphase: CONSUMER_PHASE_LAUNCHED\npower_shaping_params:\n  allow_inactive_vals: false\n  allowlist: []\n  denylist: []\n  min_stake: 0\n  top_N: 100\n  validator_set_cap: 0\n  validators_power_cap: 0\n  prioritylist: []\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"consumer-genesis-time",children:"Consumer Genesis Time"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer-genesis-time"})," command allows to query the genesis time of the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-genesis-time [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd query provider consumer-genesis-time 0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'genesis_time: "2024-10-18T08:13:23.507178095Z"\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"transactions",children:"Transactions"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"tx"})," commands allows users to interact with the ",(0,r.jsx)(n.code,{children:"provider"})," module."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider --help\n"})}),"\n",(0,r.jsx)(n.h5,{id:"assign-consumer-key",children:"Assign Consumer Key"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"assign-consensus-key"})," command allows to assign a consensus public key to use for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider assign-consensus-key [consumer-id] [consumer-pubkey] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider assign-consensus-key 0 \\\n  \'{"@type":"/cosmos.crypto.ed25519.PubKey","key":"Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="}\' \\\n  --chain-id provider  \\\n  --from mykey \\\n  --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})})]}),"\n",(0,r.jsxs)(n.p,{children:["Note that the consumer pubkey can be obtained by using ",(0,r.jsx)(n.code,{children:"interchain-security-cd tendermint show-validator"})," command."]}),"\n",(0,r.jsx)(n.h5,{id:"create-consumer",children:"Create Consumer"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"create-consumer"})," command allows to create a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider create-consumer [consumer-parameters] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider create-consumer path/to/create-consumer-msg.json \\\n  --chain-id provider  \\\n  --from mykey \\\n  --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})}),(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"create-consumer-msg.json"})," contains:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n\t"chain_id" : "pion-1",                  \n\t"metadata": {\n        "name": "pion-1",\n        "description":"description of your chain and all other relevant information",\n        "metadata": "{\\"forge_json_url\\": \\"...\\", \\"stage\\": \\"mainnet\\"}"\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"update-consumer",children:"Update Consumer"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"update-consumer"})," command allows to update a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider update-consumer [consumer-parameters] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider update-consumer path/to/update-consumer.json \\\n  --chain-id provider  \\\n  --from mykey \\\n   --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})}),(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"update-consumer-msg.json"})," contains:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n\t"consumer_id" : "0",\n  "owner_address": "cosmos1p3ucd3ptpw902fluyjzhq3ffgq4ntddac9sa3s",                  \n\t"metadata": {\n        "name": "pion-1",\n        "description":"description of your chain and all other relevant information",\n        "metadata": "{\\"forge_json_url\\": \\"...\\", \\"stage\\": \\"mainnet\\"}"\n    },\n  "initialization_parameters":{\n      "initial_height":{\n          "revision_number": 1,\n          "revision_height": 1\n          },\n      "genesis_hash": "",\n      "binary_hash": "",\n      "spawn_time": "2024-09-29T12:57:43Z",\n      "unbonding_period": 1728000000000000,\n      "ccv_timeout_period": 2419200000000000,\n      "transfer_timeout_period": 1800000000000,\n      "consumer_redistribution_fraction": "0.75",\n      "blocks_per_distribution_transmission": "1500",\n      "historical_entries": "1000",\n      "distribution_transmission_channel": "",\n      "connection_id": ""\n  },\n  "power_shaping_parameters":{\n      "top_N": 0,\n      "validators_power_cap": 10,\n      "validator_set_cap": 50,\n      "allowlist":["cosmosvalcons1l9qq4m300z8c5ez86ak2mp8znftewkwgjlxh88"],\n      "denylist":[],\n      "min_stake": "1000",\n      "allow_inactive_vals":true,\n      "prioritylist":[]\n  },\n  "allowlisted_reward_denoms": {\n    "denoms": ["ibc/0025F8A87464A471E66B234C4F93AEC5B4DA3D42D7986451A059273426290DD5"]\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"remove-consumer",children:"Remove Consumer"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"remove-consumer"})," command allows to remove a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider remove-consumer [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider remove-consumer 0\n"})})]}),"\n",(0,r.jsx)(n.h5,{id:"opt-in",children:"Opt In"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"opt-in"})," command allows a validator to opt in to a consumer chain and optionally set a consensus public key."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider opt-in [consumer-id] [consumer-pubkey] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider opt-in 0 \\\n  \'{"@type":"/cosmos.crypto.ed25519.PubKey","key":"Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="}\' \\\n  --chain-id provider  \\\n  --from mykey \\\n  --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"opt-out",children:"Opt Out"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"opt-out"})," command allows validators to opt out from consumer chains."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider opt-out [consumer-id] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider opt-out 0 \\\n  --chain-id provider  \\\n  --from mykey \\\n   --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"set-consumer-commission-rate",children:"Set Consumer Commission Rate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"set-consumer-commission-rate"})," command allows to set a per-consumer chain commission rate."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider set-consumer-commission-rate [consumer-id] [commission-rate] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider set-consumer-commission-rate 0 0.5 \\\n  --chain-id provider  \\\n  --from mykey \\\n   --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"submit-consumer-double-voting",children:"Submit Consumer Double Voting"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"submit-consumer-double-voting"})," command allows to submit a double voting evidence for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider submit-consumer-double-voting [consumer-id] [evidence] [infraction_header] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider submit-consumer-double-voting 0 path/to/evidence.json path/to/infraction_header.json \\\n  --chain-id provider  \\\n  --from mykey \\\n   --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})}),(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"evidence.json"})," contains:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "vote_a": {\n    "type": "SIGNED_MSG_TYPE_PREVOTE",\n    "height": "59",\n    "round": 0,\n    "block_id": {\n      "hash": "paTPgLrLCZmw5ctQWlaMLJhXLckafakKN9skJbTiCHA=",\n      "part_set_header": {\n        "total": 1,\n        "hash": "pVOTT8MO00rk0HAeVQgzdP3wjIOzN5X5tfPLTtXIn2g="\n      }\n    },\n    "timestamp": "2024-09-26T09:34:47.146234009Z",\n    "validator_address": "mb06cu8SzQJOdYSzrJAK43Q8at8=",\n    "validator_index": 1,\n    "signature": "Z9C1oU5AEyFqXVmQ0LKNlaVa+tGh++95EB5HYe0i61PlREOmo/OTLlWedr8kuAThBu/1CpaLz446hYjISAKqBQ==",\n    "extension": null,\n    "extension_signature": null\n  },\n  "vote_b": {\n    "type": "SIGNED_MSG_TYPE_PREVOTE",\n    "height": "59",\n    "round": 0,\n    "block_id": {\n      "hash": "07tksQsQ0gVBphgP4eeyGII9tEaLUuCauQcmwar9ktk=",\n      "part_set_header": {\n        "total": 1,\n        "hash": "nND/ClxCtoSJ9fC7Jyy884ab+nDh+PnHwI28T2fELCE="\n      }\n    },\n    "timestamp": "2024-09-26T09:34:47.051976301Z",\n    "validator_address": "mb06cu8SzQJOdYSzrJAK43Q8at8=",\n    "validator_index": 1,\n    "signature": "QscqC9ilH4gL7+3GPqLMWly+UkO+p0JgcinDZtfHOM4fYosZhx+TzhLrrXNExYpwX3D8qQHmJlLCcXLqbo7aCA==",\n    "extension": null,\n    "extension_signature": null\n  },\n  "total_voting_power": "1500",\n  "validator_power": "500",\n  "timestamp": "2024-09-26T09:34:45.945436342Z"\n}\n'})}),(0,r.jsxs)(n.p,{children:["and ",(0,r.jsx)(n.code,{children:"infraction_header.json"})," contains:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "signed_header": {\n    "header": {\n      "version": {\n        "block": "11",\n        "app": "0"\n      },\n      "chain_id": "pion-1",\n      "height": "59",\n      "time": "2024-09-26T09:34:45.945436342Z",\n      "last_block_id": {\n        "hash": "t8HcmkQbchpGE1CxqdhcogoT+yD5VIm+cRGLcosTtxE=",\n        "part_set_header": {\n          "total": 1,\n          "hash": "fTediSh8XttUUoxWJLPIxO6iWecqdMMsegD2svBtR5E="\n        }\n      },\n      "last_commit_hash": "2U4mFcB6+FffQeFPUaHkd+eBtEV5/5d3Zy0Lk58dwIs=",\n      "data_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n      "validators_hash": "D26N3CL1zQt7yn+JUQ8Dcb2vCYG7QmHMiMfY+nGxhts=",\n      "next_validators_hash": "D26N3CL1zQt7yn+JUQ8Dcb2vCYG7QmHMiMfY+nGxhts=",\n      "consensus_hash": "BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=",\n      "app_hash": "k/RW/WMOYCS89VBhKMHIRYb30a30JkZ+puyp9ESTBiA=",\n      "last_results_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n      "evidence_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n      "proposer_address": "mb06cu8SzQJOdYSzrJAK43Q8at8="\n    },\n    "commit": {\n      "height": "59",\n      "round": 0,\n      "block_id": {\n        "hash": "07tksQsQ0gVBphgP4eeyGII9tEaLUuCauQcmwar9ktk=",\n        "part_set_header": {\n          "total": 1,\n          "hash": "nND/ClxCtoSJ9fC7Jyy884ab+nDh+PnHwI28T2fELCE="\n        }\n      },\n      "signatures": [\n        {\n          "block_id_flag": "BLOCK_ID_FLAG_COMMIT",\n          "validator_address": "BsDz5HzFx0gmkIjcLzZBHTqqJ8Y=",\n          "timestamp": "2024-09-26T09:34:47.271500717Z",\n          "signature": "bXA2WgQVVlHAkn9mGIfoUvgn3C+EJCzNGTAjnhoQJwLkh1Okg3oYmwZRz+UGbc95kXyVO7kQSXhavt0ZPcJ4AA=="\n        },\n        {\n          "block_id_flag": "BLOCK_ID_FLAG_COMMIT",\n          "validator_address": "mb06cu8SzQJOdYSzrJAK43Q8at8=",\n          "timestamp": "2024-09-26T09:34:47.305955426Z",\n          "signature": "YG1OcUhpTKFz+Uo8halNmkw0s6n333+m53laZvyQSHM5gqOG4h8jzij2u9sU4H404OJMgdj+1GTxuHmQ8jWFBg=="\n        },\n        {\n          "block_id_flag": "BLOCK_ID_FLAG_COMMIT",\n          "validator_address": "tBw6QBQpY6pbEt3RxOWJDAs5JrE=",\n          "timestamp": "2024-09-26T09:34:47.255694467Z",\n          "signature": "EYOC/yo+RaosEVhwBy0bZFjVwHCR7rRZo/FmTRWpAIXZHBVrIiX3iVzRUwn78lsfbaoT97TsqRX61bAiJDM6BA=="\n        }\n      ]\n    }\n  },\n  "validator_set": {\n    "validators": [\n      {\n        "address": "BsDz5HzFx0gmkIjcLzZBHTqqJ8Y=",\n        "pub_key": {\n          "ed25519": "RrclQz9bIhkIy/gfL485g3PYMeiIku4qeo495787X10="\n        },\n        "voting_power": "500",\n        "proposer_priority": "-1000"\n      },\n      {\n        "address": "mb06cu8SzQJOdYSzrJAK43Q8at8=",\n        "pub_key": {\n          "ed25519": "mAN6RXYxSM4MNGSIriYiS7pHuwAcOHDQAy9/wnlSzOI="\n        },\n        "voting_power": "500",\n        "proposer_priority": "500"\n      },\n      {\n        "address": "tBw6QBQpY6pbEt3RxOWJDAs5JrE=",\n        "pub_key": {\n          "ed25519": "Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="\n        },\n        "voting_power": "500",\n        "proposer_priority": "500"\n      }\n    ],\n    "proposer": {\n      "address": "BsDz5HzFx0gmkIjcLzZBHTqqJ8Y=",\n      "pub_key": {\n        "ed25519": "RrclQz9bIhkIy/gfL485g3PYMeiIku4qeo495787X10="\n      },\n      "voting_power": "500",\n      "proposer_priority": "-1000"\n    },\n    "total_voting_power": "0"\n  },\n  "trusted_height": {\n    "revision_number": "0",\n    "revision_height": "0"\n  },\n  "trusted_validators": null\n}\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"submit-consumer-misbehaviour",children:"Submit Consumer Misbehaviour"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"submit-consumer-misbehaviour"})," command allows to submit an IBC misbehaviour for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain-security-pd tx provider submit-consumer-misbehaviour [consumer-id] [misbehaviour] [flags]\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'interchain-security-pd tx provider submit-consumer-misbehaviour 0 path/to/consumer-misbehaviour.json\n  --chain-id provider  \\\n  --from mykey \\\n   --gas="auto" \\\n  --gas-adjustment="1.2" \\\n  --gas-prices="0.025stake" \\\n'})}),(0,r.jsxs)(n.p,{children:["where ",(0,r.jsx)(n.code,{children:"consumer-misbehaviour.json"})," contains:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "client_id": "07-tendermint-0",\n  "header_1": {\n    "signed_header": {\n      "header": {\n        "version": {\n          "block": "11",\n          "app": "0"\n        },\n        "chain_id": "pion-1",\n        "height": "95",\n        "time": "2024-09-26T09:15:52.845591095Z",\n        "last_block_id": {\n          "hash": "PUph0B9N9X+LdrstqOoGf+W+OS6oHetQUa+0fpcRnF8=",\n          "part_set_header": {\n            "total": 1,\n            "hash": "SlVkAlM1uq3DjgTk0NbZftLlFwOEJrau1Wnhg3jEH3A="\n          }\n        },\n        "last_commit_hash": "Hxe4aLTULJ7qxJ10XsQfluKyU1Rn+d+cgDeTm2AATqU=",\n        "data_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "validators_hash": "+003y0s55+pbijWbJyVVgfNnquSaGGnQmC1hGRUIIjk=",\n        "next_validators_hash": "+003y0s55+pbijWbJyVVgfNnquSaGGnQmC1hGRUIIjk=",\n        "consensus_hash": "BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=",\n        "app_hash": "uGHlqLiNp+ZCjE889JDFKnrNkRpZ5xZ5OOamXrCNcOc=",\n        "last_results_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "evidence_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "proposer_address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk="\n      },\n      "commit": {\n        "height": "95",\n        "round": 0,\n        "block_id": {\n          "hash": "hkUUob+4UVRE4uJW53fY9UYViGTs2v6P5Sb/hUFYyak=",\n          "part_set_header": {\n            "total": 1,\n            "hash": "0tx9pRIzYJ3vwrYyOgMC8zxf/sSJUtNVm9DBKM8Yxo0="\n          }\n        },\n        "signatures": [\n          {\n            "block_id_flag": "BLOCK_ID_FLAG_COMMIT",\n            "validator_address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n            "timestamp": "2024-09-26T09:15:53.852414554Z",\n            "signature": "iiQCCxsCOoNVb2smAVmDO62o9HLf+I4rWk8o86uA1ZoFun/lk1bwrocaMp1It1SjVo/szYsX6Hp5rP1IwcAjDg=="\n          }\n        ]\n      }\n    },\n    "validator_set": {\n      "validators": [\n        {\n          "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n          "pub_key": {\n            "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n          },\n          "voting_power": "511",\n          "proposer_priority": "0"\n        }\n      ],\n      "proposer": {\n        "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n        "pub_key": {\n          "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n        },\n        "voting_power": "511",\n        "proposer_priority": "0"\n      },\n      "total_voting_power": "0"\n    },\n    "trusted_height": {\n      "revision_number": "0",\n      "revision_height": "20"\n    },\n    "trusted_validators": {\n      "validators": [\n        {\n          "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n          "pub_key": {\n            "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n          },\n          "voting_power": "500",\n          "proposer_priority": "0"\n        }\n      ],\n      "proposer": {\n        "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n        "pub_key": {\n          "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n        },\n        "voting_power": "500",\n        "proposer_priority": "0"\n      },\n      "total_voting_power": "0"\n    }\n  },\n  "header_2": {\n    "signed_header": {\n      "header": {\n        "version": {\n          "block": "11",\n          "app": "0"\n        },\n        "chain_id": "consu",\n        "height": "95",\n        "time": "2024-09-26T09:15:54.044450012Z",\n        "last_block_id": {\n          "hash": "MG9B1h4R9Xb4GRjvaNydD5NSqT37OOjGDcatCZpBlco=",\n          "part_set_header": {\n            "total": 1,\n            "hash": "3jQh26/9EuNAAEL6v2tRuGhKtkotoyTqGtduOOn++vk="\n          }\n        },\n        "last_commit_hash": "s1hUy5e7i+GrH5IGW1ck4YHK2CDTY4fjnSiNMInJBWc=",\n        "data_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "validators_hash": "+003y0s55+pbijWbJyVVgfNnquSaGGnQmC1hGRUIIjk=",\n        "next_validators_hash": "+003y0s55+pbijWbJyVVgfNnquSaGGnQmC1hGRUIIjk=",\n        "consensus_hash": "BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=",\n        "app_hash": "bWRmShMthwEAB3lIVMgB673gH5vTdoqfn223M3Xrk6Q=",\n        "last_results_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "evidence_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",\n        "proposer_address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk="\n      },\n      "commit": {\n        "height": "95",\n        "round": 0,\n        "block_id": {\n          "hash": "z3MJTCXppRYoIEPOrneYzw/U0CSiYF3zsUv67ynxM6Q=",\n          "part_set_header": {\n            "total": 1,\n            "hash": "BFSlw7bqXxBHl9O5O9sCUB01nbe0T0KGOmv7yyr8KYU="\n          }\n        },\n        "signatures": [\n          {\n            "block_id_flag": "BLOCK_ID_FLAG_COMMIT",\n            "validator_address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n            "timestamp": "2024-09-26T09:15:55.054809888Z",\n            "signature": "oi+TQ0yoDEeXyBchFIql9AGxbufnx3FzDKsCp4B8tx42ropD8tyotKOjk0OMuZQC5aMMRndRfKiYYsWiOrcpAg=="\n          }\n        ]\n      }\n    },\n    "validator_set": {\n      "validators": [\n        {\n          "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n          "pub_key": {\n            "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n          },\n          "voting_power": "511",\n          "proposer_priority": "0"\n        }\n      ],\n      "proposer": {\n        "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n        "pub_key": {\n          "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n        },\n        "voting_power": "511",\n        "proposer_priority": "0"\n      },\n      "total_voting_power": "0"\n    },\n    "trusted_height": {\n      "revision_number": "0",\n      "revision_height": "20"\n    },\n    "trusted_validators": {\n      "validators": [\n        {\n          "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n          "pub_key": {\n            "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n          },\n          "voting_power": "500",\n          "proposer_priority": "0"\n        }\n      ],\n      "proposer": {\n        "address": "3wkKSIC1TNV7KnnmTZ6Wm9dRSwk=",\n        "pub_key": {\n          "ed25519": "ujY14AgopV907IYgPAk/5x8c9267S4fQf89nyeCPTes="\n        },\n        "voting_power": "500",\n        "proposer_priority": "0"\n      },\n      "total_voting_power": "0"\n    }\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"grpc",children:"gRPC"}),"\n",(0,r.jsxs)(n.p,{children:["A user can query the ",(0,r.jsx)(n.code,{children:"provider"})," module using gRPC endpoints."]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-genesis-1",children:"Consumer Genesis"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerGenesis"})," endpoint queries a consumer chain genesis state by consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerGenesis\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 \\\n  interchain_security.ccv.provider.v1.Query/QueryConsumerGenesis \n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "genesisState": {\n        "params": {\n            "enabled": true,\n            "blocksPerDistributionTransmission": "1500",\n            "ccvTimeoutPeriod": "2419200s",\n            "transferTimeoutPeriod": "3600s",\n            "consumerRedistributionFraction": "0.75",\n            "historicalEntries": "1000",\n            "unbondingPeriod": "2419200s",\n            "softOptOutThreshold": "0",\n            "retryDelayPeriod": "3600s"\n        },\n        "provider": {\n            "clientState": {\n                "chainId": "provider",\n                "trustLevel": {\n                    "numerator": "1",\n                    "denominator": "3"\n                },\n                "trustingPeriod": "57024s",\n                "unbondingPeriod": "86400s",\n                "maxClockDrift": "10s",\n                "frozenHeight": {},\n                "latestHeight": {\n                    "revisionHeight": "10"\n                },\n                "proofSpecs": [\n                    {\n                        "leafSpec": {\n                            "hash": "SHA256",\n                            "prehashValue": "SHA256",\n                            "length": "VAR_PROTO",\n                            "prefix": "AA=="\n                        },\n                        "innerSpec": {\n                            "childOrder": [\n                                0,\n                                1\n                            ],\n                            "childSize": 33,\n                            "minPrefixLength": 4,\n                            "maxPrefixLength": 12,\n                            "hash": "SHA256"\n                        }\n                    },\n                    {\n                        "leafSpec": {\n                            "hash": "SHA256",\n                            "prehashValue": "SHA256",\n                            "length": "VAR_PROTO",\n                            "prefix": "AA=="\n                        },\n                        "innerSpec": {\n                            "childOrder": [\n                                0,\n                                1\n                            ],\n                            "childSize": 32,\n                            "minPrefixLength": 1,\n                            "maxPrefixLength": 1,\n                            "hash": "SHA256"\n                        }\n                    }\n                ],\n                "upgradePath": [\n                    "upgrade",\n                    "upgradedIBCState"\n                ]\n            },\n            "consensusState": {\n                "timestamp": "2024-09-26T08:19:42.708111Z",\n                "root": {\n                    "hash": "xbZV/9QyM3PYzY/HyJAsNogaaJVJtyAGROTcXuqxHas="\n                },\n                "nextValidatorsHash": "/zLB6RSu9omrO5L0tnDK03hCOUibwl/7eeVC3hTP7so="\n            },\n            "initialValSet": [\n                {\n                    "pubKey": {\n                        "ed25519": "E9bJ6bi7X9MG9s3djQ4MmBxshis9W15y7UzXCxp2Yuk="\n                    },\n                    "power": "100"\n                },\n                {\n                    "pubKey": {\n                        "ed25519": "+9BFckSNCI1o/+S85HLjG3pYp1FIzmfYWVKmUH2njxs="\n                    },\n                    "power": "100"\n                },\n                {\n                    "pubKey": {\n                        "ed25519": "62d2CCgWXYZHmlsCon2lzVgnu9gfubep2XRPlZKuLAQ="\n                    },\n                    "power": "100"\n                }\n            ]\n        },\n        "newChain": true\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"list-consumer-chains-1",children:"List Consumer Chains"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerChains"})," endpoint queries consumer chains supported by the provider chain and supports pagination for managing a large number of chains.\nAn optional integer parameter can be passed for phase filtering of consumer chains, (Registered=1|Initialized=2|Launched=3|Stopped=4|Deleted=5).`"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerChains\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"phase": "1"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerChains\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "chains": [\n    {\n      "chainId": "pion-1",\n      "minPowerInTopN": "-1",\n      "phase": "CONSUMER_PHASE_REGISTERED",\n      "metadata": {\n        "name": "pion-1",\n         "description":"description of your chain and all other relevant information",\n        "metadata": "some metadata about your chain"\n      },\n      "consumerId": "2"\n    },\n    {\n      "chainId": "dash-2",\n      "minPowerInTopN": "-1",\n      "phase": "CONSUMER_PHASE_REGISTERED",\n      "metadata": {\n        "name": "dash-2",\n         "description":"description of your chain and all other relevant information",\n        "metadata": "some metadata about your chain"\n      },\n      "consumerId": "4"\n    },\n  ],\n  "pagination": {\n    "total": "6"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-consumer-key-assignment-1",children:"Validator Consumer Key Assignment"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryValidatorConsumerAddr"})," endpoint queries the address assigned by a validator for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryValidatorConsumerAddr\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0", "provider_address": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryValidatorConsumerAddr\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerAddress": "cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-provider-key-1",children:"Validator Provider Key"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryValidatorProviderAddr"})," endpoint queries the provider chain address given a consumer chain validator address."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryValidatorProviderAddr\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0", "provider_address": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryValidatorProviderAddr\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerAddress": "cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk"\n  }\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"throttle-state-1",children:"Throttle State"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryThrottleState"})," endpoint queries the main on-chain state relevant to slash packet throttling."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryThrottleState\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"grpcurl -plaintext localhost:9090 interchain_security.ccv.provider.v1.Query/QueryThrottleState\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "slashMeter": "15",\n  "slashMeterAllowance": "15",\n  "nextReplenishCandidate": "2024-09-26T14:27:38.066958Z"\n}\n'})})]}),"\n",(0,r.jsx)(n.h5,{id:"registered-consumer-reward-denoms-1",children:"Registered Consumer Reward Denoms"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryRegisteredConsumerRewardDenoms"})," command allows to query registered consumer reward denoms"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryRegisteredConsumerRewardDenoms\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"grpcurl -plaintext localhost:9090 interchain_security.ccv.provider.v1.Query/QueryRegisteredConsumerRewardDenoms\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "denoms": [\n    "ibc/0025F8A87464A471E66B234C4F93AEC5B4DA3D42D7986451A059273426290DD5",\n    "ibc/054892D6BB43AF8B93AAC28AA5FD7019D2C59A15DAFD6F45C1FA2BF9BDA22454",\n    "uatom"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"all-pairs-valconsensus-address-1",children:"All Pairs Valconsensus Address"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryAllPairsValConsAddrByConsumer"})," endpoint queries the list of pair valconsensus address between provider and consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryAllPairsValConsAddrByConsumer\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryAllPairsValConsAddrByConsumer\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "pairValConAddr": [\n    {\n      "providerAddress": "cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6",\n      "consumerAddress": "cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk",\n      "consumerKey": {\n        "ed25519": "Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="\n      }\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"provider-parameters-1",children:"Provider Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryParams"})," endpoint queries all current values of provider parameters."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryParams\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"grpcurl -plaintext localhost:9090 interchain_security.ccv.provider.v1.Query/QueryParams\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "params": {\n    "templateClient": {\n      "trustLevel": {\n        "numerator": "1",\n        "denominator": "3"\n      },\n      "trustingPeriod": "0s",\n      "unbondingPeriod": "0s",\n      "maxClockDrift": "10s",\n      "frozenHeight": {},\n      "latestHeight": {},\n      "proofSpecs": [\n        {\n          "leafSpec": {\n            "hash": "SHA256",\n            "prehashValue": "SHA256",\n            "length": "VAR_PROTO",\n            "prefix": "AA=="\n          },\n          "innerSpec": {\n            "childOrder": [\n              0,\n              1\n            ],\n            "childSize": 33,\n            "minPrefixLength": 4,\n            "maxPrefixLength": 12,\n            "hash": "SHA256"\n          }\n        },\n        {\n          "leafSpec": {\n            "hash": "SHA256",\n            "prehashValue": "SHA256",\n            "length": "VAR_PROTO",\n            "prefix": "AA=="\n          },\n          "innerSpec": {\n            "childOrder": [\n              0,\n              1\n            ],\n            "childSize": 32,\n            "minPrefixLength": 1,\n            "maxPrefixLength": 1,\n            "hash": "SHA256"\n          }\n        }\n      ],\n      "upgradePath": [\n        "upgrade",\n        "upgradedIBCState"\n      ]\n    },\n    "trustingPeriodFraction": "0.66",\n    "ccvTimeoutPeriod": "2419200s",\n    "slashMeterReplenishPeriod": "3600s",\n    "slashMeterReplenishFraction": "0.05",\n    "consumerRewardDenomRegistrationFee": {\n      "denom": "stake",\n      "amount": "10000000"\n    },\n    "blocksPerEpoch": "5",\n    "numberOfEpochsToStartReceivingRewards": "24",\n    "maxProviderConsensusValidators": "180"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-opted-in-validators-1",children:"Consumer Opted In Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerChainOptedInValidators"})," endpoint queries opted-in validators for a given consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerChainOptedInValidators\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:' grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerChainOptedInValidators\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "validatorsProviderAddresses": [\n    "cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph",\n    "cosmosvalcons1jnq3j55qe4f946qj8499w0tntxwz90atx26p4q",\n    "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-validators-1",children:"Consumer Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerValidators"})," endpoint queries the latest set consumer-validator set for a given consumer ID.\nNote that this does not necessarily mean that the consumer chain is using this validator set at this exact moment because a VSCPacket could be delayed to be delivered on the consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerValidators\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerValidators\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "validators": [\n    {\n      "providerAddress": "cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph",\n      "consumerKey": {\n        "ed25519": "62d2CCgWXYZHmlsCon2lzVgnu9gfubep2XRPlZKuLAQ="\n      },\n      "rate": "0",\n      "consumerPower": "101",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "bob"\n      },\n      "providerOperatorAddress": "cosmosvaloper1a7u5k6f54ua3tptl9yn6u82yrvayet6sxn9ywn",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "101000000",\n      "providerPower": "101",\n      "validatesCurrentEpoch": true\n    },\n    {\n      "providerAddress": "cosmosvalcons1jnq3j55qe4f946qj8499w0tntxwz90atx26p4q",\n      "consumerKey": {\n        "ed25519": "+9BFckSNCI1o/+S85HLjG3pYp1FIzmfYWVKmUH2njxs="\n      },\n      "rate": "0",\n      "consumerPower": "100",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "coordinator"\n      },\n      "providerOperatorAddress": "cosmosvaloper1jk2pp655zxy2gazhxj50s8jk3750y8np6wz4lm",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "100000000",\n      "providerPower": "100",\n      "validatesCurrentEpoch": true\n    },\n    {\n      "providerAddress": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj",\n      "consumerKey": {\n        "ed25519": "Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="\n      },\n      "rate": "0",\n      "consumerPower": "100",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "alice"\n      },\n      "providerOperatorAddress": "cosmosvaloper19vfen9jn3uk3e6rrkt3pxansunujnlm40wpdvg",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "100000000",\n      "providerPower": "100",\n      "validatesCurrentEpoch": true\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"has-to-validate-1",children:"Has to Validate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerChainsValidatorHasToValidate"})," endpoint queries a list of consumer chains that a given validator must validate."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerChainsValidatorHasToValidate\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"provider_address": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerChainsValidatorHasToValidate\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerIds": [\n    "0",\n    "2"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-consumer-commission-rate-1",children:"Validator Consumer Commission Rate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryValidatorConsumerCommissionRate"})," endpoint queries the consumer commission rate a validator charges on a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryValidatorConsumerCommissionRate\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0", "provider_address": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryValidatorConsumerCommissionRate\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rate": "750000000000000000"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"blocks-until-next-epoch-1",children:"Blocks Until Next Epoch"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryBlocksUntilNextEpoch"})," endpoint allows to query the number of blocks until the next epoch begins and validator updates are sent to consumer chains."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryBlocksUntilNextEpoch\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"grpcurl -plaintext localhost:9090 interchain_security.ccv.provider.v1.Query/QueryBlocksUntilNextEpoch\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "blocks_until_next_epoch":"4"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-id-from-client-id-1",children:"Consumer Id From Client Id"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerIdFromClientId"})," endpoint allows to query the consumer id of the chain associated with the provided client id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerIdFromClientId\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"client_id":"07-tendermint-0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerIdFromClientId\n'})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'{\n  "consumerId": "0"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-chain-1",children:"Consumer Chain"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerChain"})," endpoint allows to query the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerChain\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerChain\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerId": "0",\n  "chainId": "pion-1",\n  "ownerAddress": "cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn",\n  "phase": "CONSUMER_PHASE_LAUNCHED",\n  "metadata": {\n    "name": "description of your chain and all other relevant information",\n    "description": "some metadata about your chain",\n    "metadata": "pion-1"\n  },\n  "initParams": {\n    "initialHeight": {\n      "revisionHeight": "1"\n    },\n    "genesisHash": "2D5C2110941DA54BE07CBB9FACD7E4A2E3253E79BE7BE3E5A1A7BDA518BAA4BE",\n    "binaryHash": "2D5C2110941DA54BE07CBB9FACD7E4A2E3253E79BE7BE3E5A1A7BDA518BAA4BE",\n    "spawnTime": "2023-03-11T17:02:14.718477Z",\n    "unbondingPeriod": "2419200s",\n    "ccvTimeoutPeriod": "2419200s",\n    "transferTimeoutPeriod": "3600s",\n    "consumerRedistributionFraction": "0.75",\n    "blocksPerDistributionTransmission": "1500",\n    "historicalEntries": "1000"\n  },\n  "powerShapingParams": {\n    "topN": 100,\n    "validatorSetCap": 50,\n    "minStake": "1000",\n    "allowInactiveVals": true\n  },\n "infraction_parameters":{\n      "double_sign":{\n         "slash_fraction":"0.050000000000000000",\n         "jail_duration":"9223372036.854775807s",\n         "tombstone": true\n      },\n      "downtime":{\n         "slash_fraction":"0.000000000000000000",\n         "jail_duration":"600s",\n         "tombstone": false\n      }\n   },\n  "clientId": "07-tendermint-28"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-genesis-time-1",children:"Consumer Genesis Time"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QueryConsumerGenesisTime"})," endpoint allows to query the genesis time of the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security.ccv.provider.v1.Query/QueryConsumerGenesisTime\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'grpcurl -plaintext -d \'{"consumer_id": "0"}\' localhost:9090 interchain_security.ccv.provider.v1.Query/QueryConsumerGenesisTime\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "genesisTime": "2024-10-18T08:13:23.507178095Z"\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"rest",children:"REST"}),"\n",(0,r.jsxs)(n.p,{children:["A user can query the ",(0,r.jsx)(n.code,{children:"provider"})," module using REST endpoints."]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-genesis-2",children:"Consumer Genesis"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_genesis"})," endpoint queries a consumer chain genesis state by consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/consumer_genesis/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_genesis/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "genesisState": {\n        "params": {\n            "enabled": true,\n            "blocksPerDistributionTransmission": "1500",\n            "ccvTimeoutPeriod": "2419200s",\n            "transferTimeoutPeriod": "3600s",\n            "consumerRedistributionFraction": "0.75",\n            "historicalEntries": "1000",\n            "unbondingPeriod": "2419200s",\n            "softOptOutThreshold": "0",\n            "retryDelayPeriod": "3600s"\n        },\n        "provider": {\n            "clientState": {\n                "chainId": "provider",\n                "trustLevel": {\n                    "numerator": "1",\n                    "denominator": "3"\n                },\n                "trustingPeriod": "57024s",\n                "unbondingPeriod": "86400s",\n                "maxClockDrift": "10s",\n                "frozenHeight": {},\n                "latestHeight": {\n                    "revisionHeight": "10"\n                },\n                "proofSpecs": [\n                    {\n                        "leafSpec": {\n                            "hash": "SHA256",\n                            "prehashValue": "SHA256",\n                            "length": "VAR_PROTO",\n                            "prefix": "AA=="\n                        },\n                        "innerSpec": {\n                            "childOrder": [\n                                0,\n                                1\n                            ],\n                            "childSize": 33,\n                            "minPrefixLength": 4,\n                            "maxPrefixLength": 12,\n                            "hash": "SHA256"\n                        }\n                    },\n                    {\n                        "leafSpec": {\n                            "hash": "SHA256",\n                            "prehashValue": "SHA256",\n                            "length": "VAR_PROTO",\n                            "prefix": "AA=="\n                        },\n                        "innerSpec": {\n                            "childOrder": [\n                                0,\n                                1\n                            ],\n                            "childSize": 32,\n                            "minPrefixLength": 1,\n                            "maxPrefixLength": 1,\n                            "hash": "SHA256"\n                        }\n                    }\n                ],\n                "upgradePath": [\n                    "upgrade",\n                    "upgradedIBCState"\n                ]\n            },\n            "consensusState": {\n                "timestamp": "2024-09-26T08:19:42.708111Z",\n                "root": {\n                    "hash": "xbZV/9QyM3PYzY/HyJAsNogaaJVJtyAGROTcXuqxHas="\n                },\n                "nextValidatorsHash": "/zLB6RSu9omrO5L0tnDK03hCOUibwl/7eeVC3hTP7so="\n            },\n            "initialValSet": [\n                {\n                    "pubKey": {\n                        "ed25519": "E9bJ6bi7X9MG9s3djQ4MmBxshis9W15y7UzXCxp2Yuk="\n                    },\n                    "power": "100"\n                },\n                {\n                    "pubKey": {\n                        "ed25519": "+9BFckSNCI1o/+S85HLjG3pYp1FIzmfYWVKmUH2njxs="\n                    },\n                    "power": "100"\n                },\n                {\n                    "pubKey": {\n                        "ed25519": "62d2CCgWXYZHmlsCon2lzVgnu9gfubep2XRPlZKuLAQ="\n                    },\n                    "power": "100"\n                }\n            ]\n        },\n        "newChain": true\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"list-consumer-chains-2",children:"List Consumer Chains"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_chains"})," endpoint queries consumer chains supported by the provider chain.\nAn optional integer parameter can be passed for phase filtering of consumer chains, (Registered=1|Initialized=2|Launched=3|Stopped=4|Deleted=5).`"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/consumer_chains/{phase}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_chains/3\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "chains": [\n    {\n      "chainId": "pion-1",\n      "minPowerInTopN": "-1",\n      "phase": "CONSUMER_PHASE_REGISTERED",\n      "metadata": {\n        "name": "pion-1",\n         "description":"description of your chain and all other relevant information",\n        "metadata": "some metadata about your chain"\n      },\n      "consumerId": "2"\n    },\n    {\n      "chainId": "dash-2",\n      "minPowerInTopN": "-1",\n      "phase": "CONSUMER_PHASE_REGISTERED",\n      "metadata": {\n        "name": "dash-2",\n         "description":"description of your chain and all other relevant information",\n        "metadata": "some metadata about your chain"\n      },\n      "consumerId": "4"\n    },\n  ],\n  "pagination": {\n    "total": "6"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-consumer-key-assignment-2",children:"Validator Consumer Key Assignment"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"validator_consumer_addr"})," endpoint queries the address assigned by a validator for a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/validator_consumer_addr/{consumer_id}/{provider_address}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/validator_consumer_addr/0/cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerAddress": "cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-provider-key-2",children:"Validator Provider Key"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"validator_provider_addr"})," endpoint queries the provider chain address given a consumer chain validator address."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/validator_provider_addr/{consumer_id}/{consumer_address}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/validator_provider_addr/0/cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "providerAddress": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"throttle-state-2",children:"Throttle State"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"throttle_state"})," queries the main on-chain state relevant to slash packet throttling."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'"/interchain_security/ccv/provider/throttle_state"\n'})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/throttle_state\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "slashMeter": "15",\n  "slashMeterAllowance": "15",\n  "nextReplenishCandidate": "2024-09-26T14:27:38.066958Z"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"registered-consumer-reward-denoms-2",children:"Registered Consumer Reward Denoms"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"registered_consumer_reward_denoms"})," endpoint allows to query registered consumer reward denoms"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/registered_consumer_reward_denoms\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/registered_consumer_reward_denoms\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "denoms": [\n    "ibc/0025F8A87464A471E66B234C4F93AEC5B4DA3D42D7986451A059273426290DD5",\n    "ibc/054892D6BB43AF8B93AAC28AA5FD7019D2C59A15DAFD6F45C1FA2BF9BDA22454",\n    "uatom"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"all-pairs-valconsensus-address-2",children:"All Pairs Valconsensus Address"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"address_pairs"})," endpoint queries the list of pair valconsensus address between provider and consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/address_pairs/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/address_pairs/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "pairValConAddr": [\n    {\n      "providerAddress": "cosmosvalcons1ezyrq65s3gshhx5585w6mpusq3xsj3ayzf4uv6",\n      "consumerAddress": "cosmosvalcons1kswr5sq599365kcjmhgufevfps9njf43e4lwdk",\n      "consumerKey": {\n        "ed25519": "Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="\n      }\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"provider-parameters-2",children:"Provider Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"params"})," endpoint queries all current values of provider parameters"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/params\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/params   \n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "params": {\n    "templateClient": {\n      "trustLevel": {\n        "numerator": "1",\n        "denominator": "3"\n      },\n      "trustingPeriod": "0s",\n      "unbondingPeriod": "0s",\n      "maxClockDrift": "10s",\n      "frozenHeight": {},\n      "latestHeight": {},\n      "proofSpecs": [\n        {\n          "leafSpec": {\n            "hash": "SHA256",\n            "prehashValue": "SHA256",\n            "length": "VAR_PROTO",\n            "prefix": "AA=="\n          },\n          "innerSpec": {\n            "childOrder": [\n              0,\n              1\n            ],\n            "childSize": 33,\n            "minPrefixLength": 4,\n            "maxPrefixLength": 12,\n            "hash": "SHA256"\n          }\n        },\n        {\n          "leafSpec": {\n            "hash": "SHA256",\n            "prehashValue": "SHA256",\n            "length": "VAR_PROTO",\n            "prefix": "AA=="\n          },\n          "innerSpec": {\n            "childOrder": [\n              0,\n              1\n            ],\n            "childSize": 32,\n            "minPrefixLength": 1,\n            "maxPrefixLength": 1,\n            "hash": "SHA256"\n          }\n        }\n      ],\n      "upgradePath": [\n        "upgrade",\n        "upgradedIBCState"\n      ]\n    },\n    "trustingPeriodFraction": "0.66",\n    "ccvTimeoutPeriod": "2419200s",\n    "slashMeterReplenishPeriod": "3600s",\n    "slashMeterReplenishFraction": "0.05",\n    "consumerRewardDenomRegistrationFee": {\n      "denom": "stake",\n      "amount": "10000000"\n    },\n    "blocksPerEpoch": "5",\n    "numberOfEpochsToStartReceivingRewards": "24",\n    "maxProviderConsensusValidators": "180"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-opted-in-validators-2",children:"Consumer Opted In Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"opted_in_validators"})," endpoint queries opted-in validators for a given consumer chain"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/opted_in_validators/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/opted_in_validators/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "validatorsProviderAddresses": [\n    "cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph",\n    "cosmosvalcons1jnq3j55qe4f946qj8499w0tntxwz90atx26p4q",\n    "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-validators-2",children:"Consumer Validators"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_validators"})," endpoint queries the latest set consumer-validator set for a given consumer ID\nNote that this does not necessarily mean that the consumer chain is using this validator set at this exact moment because a VSCPacket could be delayed to be delivered on the consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/consumer_validators/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_validators/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "validators": [\n    {\n      "providerAddress": "cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph",\n      "consumerKey": {\n        "ed25519": "62d2CCgWXYZHmlsCon2lzVgnu9gfubep2XRPlZKuLAQ="\n      },\n      "rate": "0",\n      "consumerPower": "101",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "bob"\n      },\n      "providerOperatorAddress": "cosmosvaloper1a7u5k6f54ua3tptl9yn6u82yrvayet6sxn9ywn",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "101000000",\n      "providerPower": "101",\n      "validatesCurrentEpoch": true\n    },\n    {\n      "providerAddress": "cosmosvalcons1jnq3j55qe4f946qj8499w0tntxwz90atx26p4q",\n      "consumerKey": {\n        "ed25519": "+9BFckSNCI1o/+S85HLjG3pYp1FIzmfYWVKmUH2njxs="\n      },\n      "rate": "0",\n      "consumerPower": "100",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "coordinator"\n      },\n      "providerOperatorAddress": "cosmosvaloper1jk2pp655zxy2gazhxj50s8jk3750y8np6wz4lm",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "100000000",\n      "providerPower": "100",\n      "validatesCurrentEpoch": true\n    },\n    {\n      "providerAddress": "cosmosvalcons1h7zs5nwruzvhyzkktvhwypfuxlch6nrrw4jjmj",\n      "consumerKey": {\n        "ed25519": "Ui5Gf1+mtWUdH8u3xlmzdKID+F3PK0sfXZ73GZ6q6is="\n      },\n      "rate": "0",\n      "consumerPower": "100",\n      "consumerCommissionRate": "100000000000000000",\n      "providerCommissionRate": "100000000000000000",\n      "description": {\n        "moniker": "alice"\n      },\n      "providerOperatorAddress": "cosmosvaloper19vfen9jn3uk3e6rrkt3pxansunujnlm40wpdvg",\n      "status": "BOND_STATUS_BONDED",\n      "providerTokens": "100000000",\n      "providerPower": "100",\n      "validatesCurrentEpoch": true\n    }\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"has-to-validate-2",children:"Has to Validate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_chains_per_validator"})," endpoint queries a list of consumer chains that a given validator must validate."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/consumer_chains_per_validator/{provider_address}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_chains_per_validator/cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerIds": [\n    "0",\n    "2"\n  ]\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"validator-consumer-commission-rate-2",children:"Validator Consumer Commission Rate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_commission_rate"})," endpoint queries the consumer commission rate a validator charges on a consumer chain."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/consumer_commission_rate/{consumer_id}/{provider_address}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_commission_rate/0/cosmosvalcons1znhu88l6dsvexunfem4u0392kwqyvdkrj66wph\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rate": "0.100000000000000000"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"blocks-until-next-epoch-2",children:"Blocks Until Next Epoch"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"blocks_until_next_epoch"})," endpoint allows to query the number of blocks until the next epoch begins and validator updates are sent to consumer chains"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/blocks_until_next_epoch\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/blocks_until_next_epoch\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "blocks_until_next_epoch":"3"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-id-from-client-id-2",children:"Consumer Id From Client Id"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_id"})," endpoint allows to query the consumer id of the chain associated with the provided client id"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/interchain_security/ccv/provider/consumer_id/{client_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_id/07-tendermint-0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumer_id":"0"\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-chain-2",children:"Consumer Chain"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_chain"})," endpoint allows to query the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/consumer_chain/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_chain/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "consumerId": "0",\n  "chainId": "pion-1",\n  "ownerAddress": "cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn",\n  "phase": "CONSUMER_PHASE_LAUNCHED",\n  "metadata": {\n    "name": "description of your chain and all other relevant information",\n    "description": "some metadata about your chain",\n    "metadata": "pion-1"\n  },\n  "initParams": {\n    "initialHeight": {\n      "revisionHeight": "1"\n    },\n    "genesisHash": "2D5C2110941DA54BE07CBB9FACD7E4A2E3253E79BE7BE3E5A1A7BDA518BAA4BE",\n    "binaryHash": "2D5C2110941DA54BE07CBB9FACD7E4A2E3253E79BE7BE3E5A1A7BDA518BAA4BE",\n    "spawnTime": "2023-03-11T17:02:14.718477Z",\n    "unbondingPeriod": "2419200s",\n    "ccvTimeoutPeriod": "2419200s",\n    "transferTimeoutPeriod": "3600s",\n    "consumerRedistributionFraction": "0.75",\n    "blocksPerDistributionTransmission": "1500",\n    "historicalEntries": "1000"\n  },\n  "powerShapingParams": {\n    "topN": 100,\n    "validatorSetCap": 50,\n    "minStake": "1000",\n    "allowInactiveVals": true\n  }\n  ,\n  "infraction_parameters":{\n      "double_sign":{\n         "slash_fraction":"0.050000000000000000",\n         "jail_duration":"9223372036.854775807s",\n         "tombstone": true\n      },\n      "downtime":{\n         "slash_fraction":"0.000000000000000000",\n         "jail_duration":"600s",\n          "tombstone": false\n      }\n   }\n}\n'})})]}),"\n",(0,r.jsx)(n.h4,{id:"consumer-genesis-time-2",children:"Consumer Genesis Time"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"consumer_genesis_time"})," endpoint allows to query the genesis time of the consumer chain associated with the consumer id."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"interchain_security/ccv/provider/consumer_genesis_time/{consumer_id}\n"})}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:1317/interchain_security/ccv/provider/consumer_genesis_time/0\n"})}),(0,r.jsx)(n.p,{children:"Output:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "genesis_time":"2024-10-18T08:29:46.153234Z"\n}\n'})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},9169:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/adr19_phases_of_a_consumer_chain-394060dd7a1e0f22242083b4ff5eae12.png"},1151:(e,n,s)=>{s.d(n,{Z:()=>t,a:()=>o});var r=s(7294);const i={},a=r.createContext(i);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);