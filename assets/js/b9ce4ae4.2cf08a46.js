"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7044],{7464:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=r(5893),i=r(1151);const o={sidebar_position:1},t="Upgrading to ICS v5.x from v4.x",a={id:"upgrading/migrate_v4_v5",title:"Upgrading to ICS v5.x from v4.x",description:"ICS v5.x version uses cosmos-sdk v0.50.x and ibc-go v8.x.",source:"@site/versioned_docs/version-v6.1.0/upgrading/migrate_v4_v5.md",sourceDirName:"upgrading",slug:"/upgrading/migrate_v4_v5",permalink:"/interchain-security/v6.1.0/upgrading/migrate_v4_v5",draft:!1,unlisted:!1,tags:[],version:"v6.1.0",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Interchain Security Parameters",permalink:"/interchain-security/v6.1.0/introduction/params"},next:{title:"Key Assignment",permalink:"/interchain-security/v6.1.0/features/key-assignment"}},d={},c=[{value:"Note",id:"note",level:2},{value:"Provider",id:"provider",level:2},{value:"Keeper initialization",id:"keeper-initialization",level:3},{value:"Protocol changes",id:"protocol-changes",level:3},{value:"Revert <code>AfterUnbondingInitiated</code>",id:"revert-afterunbondinginitiated",level:4},{value:"Migration (v4 -&gt; v5)",id:"migration-v4---v5",level:3},{value:"Additions",id:"additions",level:3},{value:"MsgUpdateParams transaction",id:"msgupdateparams-transaction",level:3},{value:"Governance proposals",id:"governance-proposals",level:3},{value:"Consumer",id:"consumer",level:2},{value:"Keeper initialization",id:"keeper-initialization-1",level:3},{value:"Additions",id:"additions-1",level:3},{value:"<code>MsgUpdateParams</code> transaction",id:"msgupdateparams-transaction-1",level:4},{value:"Params Query",id:"params-query",level:4},{value:"Migration (v2 -&gt; v3)",id:"migration-v2---v3",level:3},{value:"Interface method changes",id:"interface-method-changes",level:3},{value:"Democracy",id:"democracy",level:2},{value:"Note:",id:"note-1",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"upgrading-to-ics-v5x-from-v4x",children:"Upgrading to ICS v5.x from v4.x"}),"\n",(0,s.jsxs)(n.p,{children:["ICS ",(0,s.jsx)(n.code,{children:"v5.x"})," version uses cosmos-sdk ",(0,s.jsx)(n.code,{children:"v0.50.x"})," and ibc-go ",(0,s.jsx)(n.code,{children:"v8.x"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To migrate you application to cosmos-sdk ",(0,s.jsx)(n.code,{children:"v0.50.x"})," please use ",(0,s.jsx)(n.a,{href:"https://docs.cosmos.network/v0.50/build/migrations/upgrading",children:"this guide"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To migrate your application to ibc-go v8.x.y please use the following guides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ibc.cosmos.network/main/migrations/v7-to-v8",children:"migrate ibc-go to v8.0.0"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ibc.cosmos.network/main/migrations/v8-to-v8_1",children:"migrate ibc-go to v8.1.0"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"ICS specific changes are outlined below."}),"\n",(0,s.jsxs)(n.p,{children:["Pre-requisite version for this upgrade: any from the ",(0,s.jsx)(n.code,{children:"v4.x"})," release line."]}),"\n",(0,s.jsx)(n.h2,{id:"note",children:"Note"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"v5.0.0"})," should not be used on the provider."]}),"\n",(0,s.jsxs)(n.p,{children:["The provider should be updated to ",(0,s.jsx)(n.code,{children:"v5.1.0"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"provider",children:"Provider"}),"\n",(0,s.jsx)(n.h3,{id:"keeper-initialization",children:"Keeper initialization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"// app.go\n\napp.ProviderKeeper = ibcproviderkeeper.NewKeeper(\n    appCodec,\n    keys[providertypes.StoreKey],\n    app.GetSubspace(providertypes.ModuleName),\n    scopedIBCProviderKeeper,\n    app.IBCKeeper.ChannelKeeper,\n-   app.IBCKeeper.PortKeeper\n+   app.IBCKeeper.PortKeeper,\n    app.IBCKeeper.ConnectionKeeper,\n    app.IBCKeeper.ClientKeeper,\n    app.StakingKeeper,\n    app.SlashingKeeper,\n    app.AccountKeeper,\n    app.DistrKeeper,\n    app.BankKeeper,\n    *app.GovKeeper,\n+   authtypes.NewModuleAddress(govtypes.ModuleName).String(),\n+   authcodec.NewBech32Codec(sdk.GetConfig().GetBech32ValidatorAddrPrefix()),\n+   authcodec.NewBech32Codec(sdk.GetConfig().GetBech32ConsensusAddrPrefix()),\n    authtypes.FeeCollectorName,\n)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"authority"})," was added - requirement for executing ",(0,s.jsx)(n.code,{children:"MsgUpdateParams"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["uses ",(0,s.jsx)(n.code,{children:"x/gov"})," module address by default"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"validatorAddressCodec"})," & ",(0,s.jsx)(n.code,{children:"consensusAddressCodec"})," were added - they must match the bech32 address codec used by ",(0,s.jsx)(n.code,{children:"x/auth"}),", ",(0,s.jsx)(n.code,{children:"x/bank"}),", ",(0,s.jsx)(n.code,{children:"x/staking"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"protocol-changes",children:"Protocol changes"}),"\n",(0,s.jsxs)(n.h4,{id:"revert-afterunbondinginitiated",children:["Revert ",(0,s.jsx)(n.code,{children:"AfterUnbondingInitiated"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"AfterUnbondingInitiated"})," behavior was reverted to ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/interchain-security/blob/v1.2.0-multiden/x/ccv/provider/keeper/hooks.go#L53",children:"ICS@v1.2.0-multiden"})]}),"\n",(0,s.jsx)(n.p,{children:"The revert re-introduces an additional state check."}),"\n",(0,s.jsxs)(n.p,{children:["See this ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/interchain-security/issues/1045",children:"issue"})," for more context and the actions taken."]}),"\n",(0,s.jsx)(n.h3,{id:"migration-v4---v5",children:"Migration (v4 -> v5)"}),"\n",(0,s.jsxs)(n.p,{children:["ConensusVersion was bumped to ",(0,s.jsx)(n.code,{children:"5"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The migration allows storing the provider module params in the ",(0,s.jsx)(n.code,{children:"x/ccv/provider"})," module store instead of relying on legacy ",(0,s.jsx)(n.code,{children:"x/param"})," store."]}),"\n",(0,s.jsx)(n.p,{children:"There are no special requirements for executing this migration."}),"\n",(0,s.jsx)(n.h3,{id:"additions",children:"Additions"}),"\n",(0,s.jsx)(n.h3,{id:"msgupdateparams-transaction",children:"MsgUpdateParams transaction"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"x/gov"})," module account is selected as the default ",(0,s.jsx)(n.code,{children:"authority"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["It is available when using ",(0,s.jsx)(n.code,{children:"gov"})," CLI commands:"]}),"\n",(0,s.jsx)(n.p,{children:"Drafting a proposal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'interchain-security-pd tx gov draft-proposal\n# select "other"\n# find and select "/interchain_security.ccv.provider.v1.MsgUpdateParams"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Submitting a proposal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"interchain-security-pd tx gov submit-proposal <proposal-message.json>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Example ",(0,s.jsx)(n.code,{children:"proposal-message.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n "messages": [\n  {\n   "@type": "/interchain_security.ccv.provider.v1.MsgUpdateParams",\n   "authority": "cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn",\n   "params": {\n      "trusting_period_fraction": "0.66",\n      "ccv_timeout_period": "2419200s",\n      "init_timeout_period": "604800s",\n      "vsc_timeout_period": "3024000s",\n      "slash_meter_replenish_period": "3s",\n      "slash_meter_replenish_fraction": "1.0",\n      "consumer_reward_denom_registration_fee": {\n          "denom": "stake",\n          "amount": "10000000"\n       },\n      "blocks_per_epoch": "600"\n   }\n  }\n ],\n "metadata": "ipfs://CID",\n "deposit": "10000stake",\n "title": "Update Provider params",\n "summary": "Update Provider params",\n "expedited": false\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:""}),"\n",(0,s.jsxs)(n.p,{children:["When updating parameters ",(0,s.jsx)(n.strong,{children:"all"})," parameters fields must be specified. Make sure you are only changing parameters that you are interested in."]}),"\n",(0,s.jsx)(n.p,{children:"To avoid accidentally changing parameters you can first check the current on-chain provider params using:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'interchain-security-pd q provider params -o json\n\n{\n  "template_client": {...},\n  "trusting_period_fraction": "0.66",\n  "ccv_timeout_period": "2419200s",\n  "init_timeout_period": "604800s",\n  "vsc_timeout_period": "3024000s",\n  "slash_meter_replenish_period": "3s",\n  "slash_meter_replenish_fraction": "1.0",\n  "consumer_reward_denom_registration_fee": {\n    "denom": "stake",\n    "amount": "10000000"\n  },\n  "blocks_per_epoch": "600"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"governance-proposals",children:"Governance proposals"}),"\n",(0,s.jsx)(n.p,{children:"Submitting the following legacy proposals is still supported:"}),"\n",(0,s.jsx)(n.h1,{id:"consumer-addition-proposal",children:"Consumer addition proposal"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"interchain-security-pd tx gov submit-legacy-proposal consumer-addition <proposal_file.json>\n"})}),"\n",(0,s.jsx)(n.h1,{id:"consumer-removal-proposal",children:"Consumer removal proposal"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"interchain-security-pd tx gov submit-legacy-proposal consumer-removal <proposal_file.json>\n"})}),"\n",(0,s.jsx)(n.h1,{id:"consumer-addition-proposal-1",children:"Consumer addition proposal"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"interchain-security-pd tx gov submit-legacy-proposal change-reward-denoms <proposal_file.json>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You may also submit proposal messages above using ",(0,s.jsx)(n.code,{children:"submit-proposal"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"consumer",children:"Consumer"}),"\n",(0,s.jsx)(n.h3,{id:"keeper-initialization-1",children:"Keeper initialization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"// pre-initialize ConsumerKeeper to satsfy ibckeeper.NewKeeper\napp.ConsumerKeeper = ibcconsumerkeeper.NewNonZeroKeeper(\n    appCodec,\n    keys[ibcconsumertypes.StoreKey],\n    app.GetSubspace(ibcconsumertypes.ModuleName),\n)\n\napp.IBCKeeper = ibckeeper.NewKeeper(\n    appCodec,\n    keys[ibchost.StoreKey],\n    app.GetSubspace(ibchost.ModuleName),\n    app.ConsumerKeeper,\n    app.UpgradeKeeper,\n    scopedIBCKeeper,\n    authtypes.NewModuleAddress(govtypes.ModuleName).String(),\n)\n\n// initialize the actual consumer keeper\napp.ConsumerKeeper = ibcconsumerkeeper.NewKeeper(\n    appCodec,\n    keys[ibcconsumertypes.StoreKey],\n    app.GetSubspace(ibcconsumertypes.ModuleName),\n    scopedIBCConsumerKeeper,\n    app.IBCKeeper.ChannelKeeper,\n-   &app.IBCKeeper.PortKeeper,\n+   app.IBCKeeper.PortKeeper,\n    app.IBCKeeper.ConnectionKeeper,\n    app.IBCKeeper.ClientKeeper,\n    app.SlashingKeeper,\n    app.BankKeeper,\n    app.AccountKeeper,\n    &app.TransferKeeper,\n    app.IBCKeeper,\n    authtypes.FeeCollectorName,\n\n    // make sure the authority address makes sense for your chain\n    // the exact module account may differ depending on your setup (x/gov, x/admin or custom module)\n    // for x/ccv/democracy using the x/gov module address is correct\n    // if you don't have a way of updating consumer params you may still use the line below as it will have no affect\n+   authtypes.NewModuleAddress(govtypes.ModuleName).String(),\n    \n    // add address codecs  \n+   authcodec.NewBech32Codec(sdk.GetConfig().GetBech32ValidatorAddrPrefix()),\n+   authcodec.NewBech32Codec(sdk.GetConfig().GetBech32ConsensusAddrPrefix()),\n)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"authority"})," was added - requirement for executing ",(0,s.jsx)(n.code,{children:"MsgUpdateParams"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"make sure the authority address makes sense for your chain"}),"\n",(0,s.jsxs)(n.li,{children:["the exact module account may differ depending on your setup (",(0,s.jsx)(n.code,{children:"x/gov"}),", ",(0,s.jsx)(n.code,{children:"x/admin"})," or custom module)"]}),"\n",(0,s.jsxs)(n.li,{children:["for ",(0,s.jsx)(n.code,{children:"x/ccv/democracy"})," using the ",(0,s.jsx)(n.code,{children:"x/gov"})," module address is correct"]}),"\n",(0,s.jsxs)(n.li,{children:["if you don't have a way of updating consumer params you may use ",(0,s.jsx)(n.code,{children:"authtypes.NewModuleAddress(govtypes.ModuleName).String()"})," (has no effect on functionality)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"validatorAddressCodec"})," & ",(0,s.jsx)(n.code,{children:"consensusAddressCodec"})," were added - they must match the bech32 address codec used by ",(0,s.jsx)(n.code,{children:"x/auth"}),", ",(0,s.jsx)(n.code,{children:"x/bank"}),", ",(0,s.jsx)(n.code,{children:"x/staking"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"additions-1",children:"Additions"}),"\n",(0,s.jsxs)(n.h4,{id:"msgupdateparams-transaction-1",children:[(0,s.jsx)(n.code,{children:"MsgUpdateParams"})," transaction"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["This functionality is not supported on ",(0,s.jsx)(n.code,{children:"x/ccv/consumer"})," without additional configuration."]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["if you are using ",(0,s.jsx)(n.code,{children:"x/ccv/democracy"})," the feature is supported out of the box"]}),"\n",(0,s.jsxs)(n.li,{children:["if you are using custom logic for changing consumer params, please update your code by providing the appropriate ",(0,s.jsx)(n.code,{children:"authority"})," module account during ",(0,s.jsx)(n.code,{children:"ConsumerKeeper"})," initialization in ",(0,s.jsx)(n.code,{children:"app.go"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["You must add ",(0,s.jsx)(n.code,{children:'"/interchain_security.ccv.consumer.v1.MsgUpdateParams"'})," to your parameters whitelist to be able to change ",(0,s.jsx)(n.code,{children:"ccvconsumer"})," parameters via governance."]})}),"\n",(0,s.jsxs)(n.p,{children:["It is available when using ",(0,s.jsx)(n.code,{children:"gov"})," CLI commands:"]}),"\n",(0,s.jsx)(n.p,{children:"Drafting a proposal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'interchain-security-cd tx gov draft-proposal\n# select "other"\n# find and select "/interchain_security.ccv.consumer.v1.MsgUpdateParams"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Submitting a proposal:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:["this proposal cannot be executed on chains without access to ",(0,s.jsx)(n.code,{children:"x/gov"})," or other modules for managing governance"]})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\ninterchain-security-cdd tx gov submit-proposal <proposal-message.json>\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Example ",(0,s.jsx)(n.code,{children:"proposal-message.json"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n "messages": [\n  {\n   "@type": "/interchain_security.ccv.consumer.v1.MsgUpdateParams",\n   "authority": "consumer10d07y265gmmuvt4z0w9aw880jnsr700jlh7295",\n   "params": {\n    "enabled": true,\n    "blocks_per_distribution_transmission": "20",\n    "distribution_transmission_channel": "channel-1",\n    "provider_fee_pool_addr_str": "",\n    "ccv_timeout_period": "2419200s",\n    "transfer_timeout_period": "3000s",\n    "consumer_redistribution_fraction": "0.75",\n    "historical_entries": "10000",\n    "unbonding_period": "1209600s",\n    "soft_opt_out_threshold": "0.05",\n    "reward_denoms": [],\n    "provider_reward_denoms": [],\n    "retry_delay_period": "3000s"\n   }\n  }\n ],\n "metadata": "ipfs://CID",\n "deposit": "1000uatom",\n "title": "Update Consumer Params -- change transfer_timeout_period to 3000s",\n "summary": "Test Update Consumer Params",\n "expedited": false\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When updating parameters ",(0,s.jsx)(n.strong,{children:"all"})," parameters fields must be specified. Make sure you are only changing parameters that you are interested in."]}),"\n",(0,s.jsx)(n.p,{children:"To avoid accidentally changing parameters you can first check the current on-chain consumer params using:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"interchain-security-pd q ccvconsumer params -o json\n"})}),"\n",(0,s.jsx)(n.h4,{id:"params-query",children:"Params Query"}),"\n",(0,s.jsx)(n.p,{children:"Consumer params query was added:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'interchain-security-cd q ccvconsumer params -o json\n\n{\n  "params": {\n    "enabled": true,\n    "blocks_per_distribution_transmission": "1000",\n    "distribution_transmission_channel": "",\n    "provider_fee_pool_addr_str": "",\n    "ccv_timeout_period": "2419200s",\n    "transfer_timeout_period": "3600s",\n    "consumer_redistribution_fraction": "0.75",\n    "historical_entries": "10000",\n    "unbonding_period": "1209600s",\n    "soft_opt_out_threshold": "0.05",\n    "reward_denoms": [],\n    "provider_reward_denoms": [],\n    "retry_delay_period": "3600s"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"migration-v2---v3",children:"Migration (v2 -> v3)"}),"\n",(0,s.jsxs)(n.p,{children:["ConensusVersion was bumped to ",(0,s.jsx)(n.code,{children:"3"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The migration allows storing the consumer module params in the ",(0,s.jsx)(n.code,{children:"x/ccv/consumer"})," module store instead of relying on legacy ",(0,s.jsx)(n.code,{children:"x/param"})," store."]}),"\n",(0,s.jsx)(n.p,{children:"There are no special requirements for executing this migration."}),"\n",(0,s.jsx)(n.h3,{id:"interface-method-changes",children:"Interface method changes"}),"\n",(0,s.jsxs)(n.p,{children:["Consumer methods were changed to match the cosmos-sdk ",(0,s.jsx)(n.code,{children:"StakingKeeper"})," interface.\nYou will not need to change your code, unless you are using the ",(0,s.jsx)(n.code,{children:"ConsumerKeeper"})," inside custom tests or you have developed custom app functionality that relies on ",(0,s.jsx)(n.code,{children:"ConsumerKeeper"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Please check the list below if you are using any of the consumer methods:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:"type StakingKeeper interface {\n  UnbondingTime(ctx context.Context) (time.Duration, error)\n  GetValidatorByConsAddr(ctx context.Context, consAddr sdk.ConsAddress) (stakingtypes.Validator, error)\n  GetLastValidatorPower(ctx context.Context, operator sdk.ValAddress) (int64, error)\n  Jail(context.Context, sdk.ConsAddress) error // jail a validator\n  Slash(ctx context.Context, consAddr sdk.ConsAddress, infractionHeight, power int64, slashFactor math.LegacyDec) (math.Int, error)\n  SlashWithInfractionReason(ctx context.Context, consAddr sdk.ConsAddress, infractionHeight, power int64, slashFactor math.LegacyDec, infraction stakingtypes.Infraction) (math.Int, error)\n  Unjail(ctx context.Context, addr sdk.ConsAddress) error\n  GetValidator(ctx context.Context, addr sdk.ValAddress) (stakingtypes.Validator, error)\n  IterateLastValidatorPowers(ctx context.Context, cb func(addr sdk.ValAddress, power int64) (stop bool)) error\n  IterateValidators(ctx context.Context, f func(index int64, validator stakingtypes.ValidatorI) (stop bool)) error\n  Validator(ctx context.Context, addr sdk.ValAddress) (stakingtypes.ValidatorI, error)\n  IsValidatorJailed(ctx context.Context, addr sdk.ConsAddress) (bool, error)\n  ValidatorByConsAddr(ctx context.Context, consAddr sdk.ConsAddress) (stakingtypes.ValidatorI, error)\n  Delegation(ctx context.Context, addr sdk.AccAddress, valAddr sdk.ValAddress) (stakingtypes.DelegationI, error)\n  MaxValidators(ctx context.Context) (uint32, error)\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The consumer implements the ",(0,s.jsx)(n.code,{children:"StakingKeeper"})," interface shown above."]}),"\n",(0,s.jsx)(n.h2,{id:"democracy",children:"Democracy"}),"\n",(0,s.jsxs)(n.p,{children:["Changes in ",(0,s.jsx)(n.code,{children:"Consumer"})," also apply to ",(0,s.jsx)(n.code,{children:"Democracy"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Democracy ",(0,s.jsx)(n.code,{children:"x/staking"}),", ",(0,s.jsx)(n.code,{children:"x/distribution"})," and ",(0,s.jsx)(n.code,{children:"x/gov"})," were updated to reflect changes in ",(0,s.jsx)(n.code,{children:"cosmos-sdk v0.50.x"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["There were no notable changes arising to the module functionality aside from conforming to ",(0,s.jsx)(n.code,{children:"cosmos-sdk v0.50.x"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"note-1",children:"Note:"}),"\n",(0,s.jsxs)(n.p,{children:["You must add ",(0,s.jsx)(n.code,{children:'"/interchain_security.ccv.consumer.v1.MsgUpdateParams"'})," to your parameters whitelist to be able to change ",(0,s.jsx)(n.code,{children:"consumer"})," parameters via governance."]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>t});var s=r(7294);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);